(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[463,811],{6109:(z,F,p)=>{"use strict";p.d(F,{g:()=>j});var r=p(1135),A=p(8505),S=p(8760),D=p(1571),Z=p(5453),R=p(5412),w=p(5384);let j=(()=>{class _{constructor(f,O,h){this.router=f,this.dialog=O,this.apiService=h,this.jobs=new r.X([]),this.cartId=new r.X(""),this.quoteReference=new r.X(""),this.widgetDataToSave=new r.X({}),this.isLoadedWidget=new r.X(!0),this.summary=new r.X(null),this.widgetErrors=[],this.dialogConfig={title:"Cancel order?",message:"Are you sure you want to leave the ordering process? You can save the current setup as the quote and get back to it later",acceptButtonText:"Delete order",declineButtonText:"Save as quote ",informationButtonText:"Continue order"}}getAllWidgets(f,O){return this.apiService.get(O?S.wY.generate(S.T5.COMPOSE_PRODUCTS_BY_ID,{id:O}):S.wY.generate(S.T5.FIST_STEP_BY_PRODUCT_ID,{productId:f}))}postWidgetData(f,O,h){return O?this.apiService.patch(S.wY.generate(S.T5.COMPOSE_PRODUCTS_BY_ID,{id:O}),h):this.apiService.post(S.wY.generate(S.T5.COMPOSE_PRODUCTS_BY_ID,{id:f}),h)}calculatePrice(f,O){return this.apiService.post(S.wY.generate(S.T5.CALCULATE_PRICE,{jobId:f}),O).pipe((0,A.b)(h=>{this.summary.next(h.summary),this.isCanAddToCart=!0}))}addToCart(f){return this.apiService.post(S.wY.generate(S.T5.ADD_TO_CART,{jobId:f}))}deleteJob(f){return this.apiService.delete(S.wY.generate(S.T5.JOB_BY_ID,{jobId:f}))}saveParams(f){return this.apiService.post(S.wY.generate(S.T5.SAVE_JOB_PARAMETERS,{jobId:f})).pipe((0,A.b)(()=>this.jobIdUnsavedParams=null))}setGlobalError(f,O){const h=this.widgetErrors.find(T=>T.key===f);h?h.errorMessage=O:this.widgetErrors.push({key:f,errorMessage:O})}resetGlobalError(){this.widgetErrors=[]}getGlobalError(f){return this.widgetErrors.find(O=>O.key===f)?.errorMessage||""}get isGlobalError(){return this.widgetErrors.some(f=>f.errorMessage)}}return _.\u0275fac=function(f){return new(f||_)(D.LFG(Z.F0),D.LFG(R.uw),D.LFG(w.s))},_.\u0275prov=D.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},8033:(z,F,p)=>{"use strict";function r(e,n,t,o,i,c,g){try{var v=e[c](g),P=v.value}catch(B){return void t(B)}v.done?n(P):Promise.resolve(P).then(o,i)}function A(e){return function(){var n=this,t=arguments;return new Promise(function(o,i){var c=e.apply(n,t);function g(P){r(c,o,i,g,v,"next",P)}function v(P){r(c,o,i,g,v,"throw",P)}g(void 0)})}}p.d(F,{C:()=>un});var S=p(1135),D=p(7579);const j="function"==typeof btoa,_="function"==typeof Buffer,f=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),h=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),b=((e=>{let n={};e.forEach((t,o)=>n[t]=o)})(h),String.fromCharCode.bind(String)),C=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,n=>"+"==n?"-":"_")),s=j?e=>btoa(e):_?e=>Buffer.from(e,"binary").toString("base64"):e=>{let n,t,o,i,c="";const g=e.length%3;for(let v=0;v<e.length;){if((t=e.charCodeAt(v++))>255||(o=e.charCodeAt(v++))>255||(i=e.charCodeAt(v++))>255)throw new TypeError("invalid character found");n=t<<16|o<<8|i,c+=h[n>>18&63]+h[n>>12&63]+h[n>>6&63]+h[63&n]}return g?c.slice(0,g-3)+"===".substring(g):c},l=_?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let o=0,i=e.length;o<i;o+=4096)t.push(b.apply(null,e.subarray(o,o+4096)));return s(t.join(""))},U=e=>{if(e.length<2)return(n=e.charCodeAt(0))<128?e:n<2048?b(192|n>>>6)+b(128|63&n):b(224|n>>>12&15)+b(128|n>>>6&63)+b(128|63&n);var n=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return b(240|n>>>18&7)+b(128|n>>>12&63)+b(128|n>>>6&63)+b(128|63&n)},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,q=_?e=>Buffer.from(e,"utf8").toString("base64"):f?e=>l(f.encode(e)):e=>s((e=>e.replace(k,U))(e)),nt_encode=(e,n=!1)=>n?C(q(e)):q(e);var rt=p(7629),ot=p.n(rt);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function xe(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function at(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ut(e,n){if(n&&("object"===ae(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function se(e){var n="function"==typeof Map?new Map:void 0;return se=function(o){if(null===o||!function ft(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(o))return o;if("function"!=typeof o)throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(o))return n.get(o);n.set(o,i)}function i(){return ee(o,arguments,G(this).constructor)}return i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$(i,o)},se(e)}function ee(e,n,t){return(ee=Oe()?Reflect.construct.bind():function(i,c,g){var v=[null];v.push.apply(v,c);var B=new(Function.bind.apply(i,v));return g&&$(B,g.prototype),B}).apply(null,arguments)}function Oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $(e,n){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o})(e,n)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}const te=function(e){!function st(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&$(e,n)}(t,e);var n=function lt(e){var n=Oe();return function(){var i,o=G(e);if(n){var c=G(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return ut(this,i)}}(t);function t(o){var i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(at(this,t),(i=n.call(this,o)).originalRequest=g,i.originalResponse=v,i.causingError=c,null!=c&&(o+=", caused by ".concat(c.toString())),null!=g){var P=g.getHeader("X-Request-ID")||"n/a",B=g.getMethod(),I=g.getURL(),L=v?v.getStatus():"n/a",Y=v?v.getBody()||"":"n/a";o+=", originated from request (method: ".concat(B,", url: ").concat(I,", response code: ").concat(L,", response text: ").concat(Y,", request id: ").concat(P,")")}return i.message=o,i}return function it(e,n,t){return n&&xe(e.prototype,n),t&&xe(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(se(Error));function Ce(e,n){return function mt(e){if(Array.isArray(e))return e}(e)||function gt(e,n){var t=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var g,v,o=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(g=t.next()).done)&&(o.push(g.value),!n||o.length!==n);i=!0);}catch(P){c=!0,v=P}finally{try{!i&&null!=t.return&&t.return()}finally{if(c)throw v}}return o}}(e,n)||function _t(e,n){if(e){if("string"==typeof e)return Ee(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ee(e,n)}}(e,n)||function ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function Ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,o)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(t),!0).forEach(function(o){vt(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function vt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function De(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Re=function(){function e(n,t){(function yt(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),"resume"in t&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=t,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=n,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return function bt(e,n,t){n&&De(e.prototype,n),t&&De(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(o){return t._urlStorage.findUploadsByFingerprint(o)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,o=this.file;if(o)if(this.options.endpoint||this.options.uploadUrl||this.url){var i=this.options.retryDelays;if(null==i||"[object Array]"===Object.prototype.toString.call(i)){if(this.options.parallelUploads>1)for(var c=0,g=["uploadUrl","uploadSize","uploadLengthDeferred"];c<g.length;c++){var v=g[c];if(this.options[v])return void this._emitError(new Error("tus: cannot use the ".concat(v," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(o,this.options).then(function(P){return null==P||"Calculated fingerprint: ".concat(P),t._fingerprint=P,t._source?t._source:t.options.fileReader.openFile(o,t.options.chunkSize)}).then(function(P){if(t._source=P,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size))return void t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(t._size=t._source.size,null==t._size)return void t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()}).catch(function(P){t._emitError(P)})}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,o=this,i=this._size,c=0;this._parallelUploads=[];var v=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function Pt(e,n){for(var t=Math.floor(e/n),o=[],i=0;i<n;i++)o.push({start:t*i,end:t*(i+1)});return o[n-1].end=e,o}(this._source.size,null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads);this._parallelUploadUrls&&v.forEach(function(I,L){I.uploadUrl=o._parallelUploadUrls[L]||null}),this._parallelUploadUrls=new Array(v.length);var B,P=v.map(function(I,L){var Y=0;return o._source.slice(I.start,I.end).then(function(V){var cn=V.value;return new Promise(function(fn,pn){var dn=J(J({},o.options),{},{uploadUrl:I.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:J(J({},o.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:fn,onError:pn,onProgress:function(re){c=c-Y+re,Y=re,o._emitProgress(c,i)},onUploadUrlAvailable:function(){o._parallelUploadUrls[L]=_e.url,o._parallelUploadUrls.filter(function(re){return Boolean(re)}).length===v.length&&o._saveUploadInUrlStorage()}}),_e=new e(cn,dn);_e.start(),o._parallelUploads.push(_e)})})});Promise.all(P).then(function(){(B=o._openRequest("POST",o.options.endpoint)).setHeader("Upload-Concat","final;".concat(o._parallelUploadUrls.join(" ")));var I=Te(o.options.metadata);return""!==I&&B.setHeader("Upload-Metadata",I),o._sendRequest(B,null)}).then(function(I){if(K(I.getStatus(),200)){var L=I.getHeader("Location");null!=L?(o.url=Be(o.options.endpoint,L),"Created upload at ".concat(o.url),o._emitSuccess()):o._emitHttpError(B,I,"tus: invalid or missing Location header")}else o._emitHttpError(B,I,"tus: unexpected response while creating upload")}).catch(function(I){o._emitError(I)})}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(t){var o=this;return null!=this._parallelUploads&&this._parallelUploads.forEach(function(i){i.abort(t)}),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then(function(){return o._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(t,o,i,c){this._emitError(new te(i,c,t,o))}},{key:"_emitError",value:function(t){var o=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),je(t,this._retryAttempt,this.options))){var c=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout(function(){o.start()},c))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,o){"function"==typeof this.options.onProgress&&this.options.onProgress(t,o)}},{key:"_emitChunkComplete",value:function(t,o,i){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,o,i)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var o=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?o.setHeader("Upload-Defer-Length",1):o.setHeader("Upload-Length",this._size);var c,i=Te(this.options.metadata);""!==i&&o.setHeader("Upload-Metadata",i),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,c=this._addChunkToRequest(o)):c=this._sendRequest(o,null),c.then(function(g){if(K(g.getStatus(),200)){var v=g.getHeader("Location");if(null!=v)return t.url=Be(t.options.endpoint,v),"Created upload at ".concat(t.url),"function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),0===t._size?(t._emitSuccess(),void t._source.close()):void t._saveUploadInUrlStorage().then(function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(o,g):(t._offset=0,t._performUpload())});t._emitHttpError(o,g,"tus: invalid or missing Location header")}else t._emitHttpError(o,g,"tus: unexpected response while creating upload")}).catch(function(g){t._emitHttpError(o,null,"tus: failed to create upload",g)})}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,o=this._openRequest("HEAD",this.url);this._sendRequest(o,null).then(function(c){var g=c.getStatus();if(!K(g,200))return 423===g?void t._emitHttpError(o,c,"tus: upload is currently locked; retry later"):(K(g,400)&&t._removeFromUrlStorage(),t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(o,c,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var v=parseInt(c.getHeader("Upload-Offset"),10);if(Number.isNaN(v))t._emitHttpError(o,c,"tus: invalid or missing offset value");else{var P=parseInt(c.getHeader("Upload-Length"),10);!Number.isNaN(P)||t.options.uploadLengthDeferred?("function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(v===P)return t._emitProgress(P,P),void t._emitSuccess();t._offset=v,t._performUpload()})):t._emitHttpError(o,c,"tus: invalid or missing length value")}}).catch(function(c){t._emitHttpError(o,null,"tus: failed to resume upload",c)})}},{key:"_performUpload",value:function(){var o,t=this;this._aborted||(this.options.overridePatchMethod?(o=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):o=this._openRequest("PATCH",this.url),o.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(o).then(function(c){K(c.getStatus(),200)?t._handleUploadResponse(o,c):t._emitHttpError(o,c,"tus: unexpected response while uploading chunk")}).catch(function(c){t._aborted||t._emitHttpError(o,null,"tus: failed to upload chunk at offset ".concat(t._offset),c)}))}},{key:"_addChunkToRequest",value:function(t){var o=this,i=this._offset,c=this._offset+this.options.chunkSize;return t.setProgressHandler(function(g){o._emitProgress(i+g,o._size)}),t.setHeader("Content-Type","application/offset+octet-stream"),(c===1/0||c>this._size)&&!this.options.uploadLengthDeferred&&(c=this._size),this._source.slice(i,c).then(function(g){var v=g.value;return o.options.uploadLengthDeferred&&g.done&&(o._size=o._offset+(v&&v.size?v.size:0),t.setHeader("Upload-Length",o._size)),null===v?o._sendRequest(t):(o._emitProgress(o._offset,o._size),o._sendRequest(t,v))})}},{key:"_handleUploadResponse",value:function(t,o){var i=parseInt(o.getHeader("Upload-Offset"),10);if(!Number.isNaN(i))return this._emitProgress(i,this._size),this._emitChunkComplete(i-this._offset,i,this._size),this._offset=i,i===this._size?(this._emitSuccess(),void this._source.close()):void this._performUpload();this._emitHttpError(t,o,"tus: invalid or missing offset value")}},{key:"_openRequest",value:function(t,o){var i=Me(t,o,this.options);return this._req=i,i}},{key:"_removeFromUrlStorage",value:function(){var t=this;!this._urlStorageKey||(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(o){t._emitError(o)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var o={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?o.parallelUploadUrls=this._parallelUploadUrls:o.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,o).then(function(i){t._urlStorageKey=i})}},{key:"_sendRequest",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ke(t,o,this.options)}}],[{key:"terminate",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Me("DELETE",t,o);return ke(i,null,o).then(function(c){if(204!==c.getStatus())throw new te("tus: unexpected response while terminating upload",null,i,c)}).catch(function(c){if(c instanceof te||(c=new te("tus: failed to terminate upload",c,i,null)),!je(c,0,o))throw c;var g=o.retryDelays[0],v=o.retryDelays.slice(1),P=J(J({},o),{},{retryDelays:v});return new Promise(function(B){return setTimeout(B,g)}).then(function(){return e.terminate(t,P)})})}}]),e}();function Te(e){return Object.entries(e).map(function(n){var t=Ce(n,2),i=t[1];return"".concat(t[0]," ").concat(nt_encode(String(i)))}).join(",")}function K(e,n){return e>=n&&e<n+100}function Me(e,n,t){var o=t.httpStack.createRequest(e,n);if(o.setHeader("Tus-Resumable","1.0.0"),Object.entries(t.headers||{}).forEach(function(g){var v=Ce(g,2);o.setHeader(v[0],v[1])}),t.addRequestId){var c=function dt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}();o.setHeader("X-Request-ID",c)}return o}function ke(e,n,t){return("function"==typeof t.onBeforeRequest?Promise.resolve(t.onBeforeRequest(e)):Promise.resolve()).then(function(){return e.send(n).then(function(i){return("function"==typeof t.onAfterResponse?Promise.resolve(t.onAfterResponse(e,i)):Promise.resolve()).then(function(){return i})})})}function je(e,n,t){if(null==t.retryDelays||n>=t.retryDelays.length||null==e.originalRequest)return!1;if(t&&"function"==typeof t.onShouldRetry)return t.onShouldRetry(e,n,t);var o=e.originalResponse?e.originalResponse.getStatus():0;return(!K(o,400)||409===o||423===o)&&function Ut(){var e=!0;return typeof window<"u"&&"navigator"in window&&!1===window.navigator.onLine&&(e=!1),e}()}function Be(e,n){return new(ot())(n,e).toString()}Re.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};const le=Re;function Ie(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var St=function(){function e(){!function xt(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function Ot(e,n,t){n&&Ie(e.prototype,n),t&&Ie(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,o){return Promise.resolve(null)}}]),e}();function Ze(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ue=!1;try{ue="localStorage"in window;var ce="tusSupport",Fe=localStorage.getItem(ce);localStorage.setItem(ce,Fe),null===Fe&&localStorage.removeItem(ce)}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;ue=!1}var At=ue,Dt=function(){function e(){!function Ct(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function Et(e,n,t){n&&Ze(e.prototype,n),t&&Ze(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var o=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(o)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,o){var i=Math.round(1e12*Math.random()),c="tus::".concat(t,"::").concat(i);return localStorage.setItem(c,JSON.stringify(o)),Promise.resolve(c)}},{key:"_findEntries",value:function(t){for(var o=[],i=0;i<localStorage.length;i++){var c=localStorage.key(i);if(0===c.indexOf(t))try{var g=JSON.parse(localStorage.getItem(c));g.urlStorageKey=c,o.push(g)}catch{}}return o}}]),e}();function fe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Le(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,n,t){return n&&Le(e.prototype,n),t&&Le(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Rt=function(){function e(){fe(this,e)}return pe(e,[{key:"createRequest",value:function(t,o){return new Tt(t,o)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Tt=function(){function e(n,t){fe(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(n,t,!0),this._method=n,this._url=t,this._headers={}}return pe(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,o){this._xhr.setRequestHeader(t,o),this._headers[t]=o}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(o){!o.lengthComputable||t(o.loaded)})}},{key:"send",value:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(i,c){t._xhr.onload=function(){i(new Mt(t._xhr))},t._xhr.onerror=function(g){c(g)},t._xhr.send(o)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Mt=function(){function e(n){fe(this,e),this._xhr=n}return pe(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}();const ze=function(){return typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function qe(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ne=function(){function e(n){(function Ft(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),this._file=n,this.size=n.size}return function Lt(e,n,t){n&&qe(e.prototype,n),t&&qe(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"slice",value:function(t,o){if(typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u"))return function Zt(e){return new Promise(function(n,t){var o=new FileReader;o.onload=function(){var i=new Uint8Array(o.result);n({value:i})},o.onerror=function(i){t(i)},o.readAsArrayBuffer(e)})}(this._file.slice(t,o));var i=this._file.slice(t,o);return Promise.resolve({value:i})}},{key:"close",value:function(){}}]),e}();function He(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ye(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var Ht=function(){function e(n){(function zt(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=n,this._done=!1}return function qt(e,n,t){n&&He(e.prototype,n),t&&He(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"slice",value:function(t,o){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,o)}},{key:"_readUntilEnoughDataOrDone",value:function(t,o){var i=this,c=o<=this._bufferOffset+Ye(this._buffer);if(this._done||c){var g=this._getDataFromBuffer(t,o);return Promise.resolve({value:g,done:null==g&&this._done})}return this._reader.read().then(function(P){var B=P.value;return P.done?i._done=!0:i._buffer=void 0===i._buffer?B:function Nt(e,n){if(e.concat)return e.concat(n);if(e instanceof Blob)return new Blob([e,n],{type:e.type});if(e.set){var t=new e.constructor(e.length+n.length);return t.set(e),t.set(n,e.length),t}throw new Error("Unknown data type")}(i._buffer,B),i._readUntilEnoughDataOrDone(t,o)})}},{key:"_getDataFromBuffer",value:function(t,o){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var i=0===Ye(this._buffer);return this._done&&i?null:this._buffer.slice(0,o-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function Je(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Kt=function(){function e(){!function Yt(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return function Jt(e,n,t){n&&Je(e.prototype,n),t&&Je(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"openFile",value:function(t,o){return ze()&&t&&typeof t.uri<"u"?function jt(e){return new Promise(function(n,t){var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){n(o.response)},o.onerror=function(i){t(i)},o.open("GET",e),o.send()})}(t.uri).then(function(i){return new Ne(i)}).catch(function(i){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(i))}):"function"==typeof t.slice&&typeof t.size<"u"?Promise.resolve(new Ne(t)):"function"==typeof t.read?(o=Number(o),Number.isFinite(o)?Promise.resolve(new Ht(t,o)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function $t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ke(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,n){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o})(e,n)}function tn(e,n){if(n&&("object"===de(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,o)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach(function(o){on(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function on(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Qe=W(W({},le.defaultOptions),{},{httpStack:new Rt,fileReader:new Kt,urlStorage:At?new Dt:new St,fingerprint:function Wt(e,n){return ze()?Promise.resolve(function Qt(e,n){var t=e.exif?function Xt(e){var n=0;if(0===e.length)return n;for(var t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",t,n.endpoint].join("/")}(e,n)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,n.endpoint].join("-"))}}),an=function(e){!function Vt(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&he(e,n)}(t,e);var n=function en(e){var n=function rn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,o=ne(e);if(n){var c=ne(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return tn(this,i)}}(t);function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $t(this,t),i=W(W({},Qe),i),n.call(this,o,i)}return function Gt(e,n,t){n&&Ke(e.prototype,n),t&&Ke(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(t,null,[{key:"terminate",value:function(i){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c=W(W({},Qe),c),le.terminate(i,c)}}]),t}(le),Ge=(window,p(2340)),Ve=p(1571),ln=p(1438);let un=(()=>{class e{constructor(t){this.authorizationService=t,this.reloadEvent$=new S.X(!1),this.uploadStatus=new D.x,this.uploadProgress=this.uploadStatus.asObservable(),this.fileStatusArr=[],this.upcomingArtworksSet=new Set,this.loadedArtworksSet=new Set}uploadFile(t,o,i){var c=this;const g={filename:o,progress:0,hash:"",uuid:""},v=1e8,P=t.size/4<v?Math.floor(t.size/4):v;this.fileStatusArr.push(g),this.uploadStatus.next(this.fileStatusArr);const B=new an(t,{endpoint:this.authorizationService.isAdmin?`${Ge.N.api_url}/admin/tus/proofs/${i}`:`${Ge.N.api_url}/tus/artworks/${i}`,retryDelays:[0,3e3,5e3,1e4,2e4],chunkSize:P,headers:{Authorization:"Bearer "+this.authorizationService.token},metadata:{filename:o,filetype:t.type},removeFingerprintOnSuccess:!0,onError:(I=A(function*(L){return console.log(L),c.clearBuffer(),!1}),function(Y){return I.apply(this,arguments)}),onChunkComplete:(I,L,Y)=>{this.fileStatusArr.forEach(V=>{V.filename===o&&(V.progress=Math.floor(L/Y*100),B.url&&(V.uuid=B.url.split("/").slice(-1)[0]))}),this.uploadStatus.next(this.fileStatusArr)},onSuccess:function(){var I=A(function*(){return c.fileStatusArr.forEach(L=>{L.filename===o&&(L.progress=100,c.loadedArtworksSet.add(i))}),c.uploadStatus.next(c.fileStatusArr),!0});return function(){return I.apply(this,arguments)}}()});var I;B.start()}get isLoaded(){return JSON.stringify(Array.from(this.loadedArtworksSet).sort())===JSON.stringify(Array.from(this.upcomingArtworksSet).sort())}clearBuffer(){this.upcomingArtworksSet.clear(),this.loadedArtworksSet.clear()}}return e.\u0275fac=function(t){return new(t||e)(Ve.LFG(ln.Z))},e.\u0275prov=Ve.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2834:(z,F,p)=>{"use strict";p.d(F,{n:()=>R});var r=p(1571),A=p(7976),S=p(6895),D=p(5453);function Z(w,j){if(1&w){const _=r.EpF();r.O4$(),r.kcU(),r.TgZ(0,"div",6),r._UZ(1,"img",7),r.TgZ(2,"a",8),r.NdJ("click",function(){const O=r.CHM(_).$implicit,h=r.oxw();return r.KtG(h.navigate(O.url))}),r._uU(3),r.qZA()()}if(2&w){const _=j.$implicit;r.xp6(2),r.ekj("disabled",!_.url),r.Q6J("routerLink","back"===_.url?"./../..":_.url),r.xp6(1),r.hij(" ",_.name," ")}}let R=(()=>{class w{constructor(_){this.navigation=_,this.breadcrumbsData=[]}navigate(_){"back"===_&&this.navigation.back()}}return w.\u0275fac=function(_){return new(_||w)(r.Y36(A.n))},w.\u0275cmp=r.Xpm({type:w,selectors:[["app-breadcrumbs"]],inputs:{breadcrumbsData:"breadcrumbsData"},decls:6,vars:1,consts:[[1,"breadcrumbs"],["routerLink","/",1,"breadcrumbs__icon"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10 15V12.5","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["d","M8.42085 2.69024L8.42124 2.68993C9.29383 1.98911 10.7007 1.99255 11.5879 2.69918C11.588 2.69927 11.5881 2.69937 11.5882 2.69946L17.0439 7.064C17.3445 7.30967 17.6091 7.69825 17.7807 8.14732C17.9521 8.59599 18.0144 9.06244 17.9561 9.44607L16.9072 15.7229C16.9071 15.7234 16.907 15.7239 16.9069 15.7244C16.7056 16.8789 15.578 17.8334 14.4165 17.8334H5.58314C4.40366 17.8334 3.30234 16.9027 3.10111 15.7332C3.10105 15.7329 3.10099 15.7325 3.10094 15.7322L2.0513 9.45102L2.05111 9.44988C1.98563 9.06355 2.04394 8.59637 2.21491 8.14804C2.38585 7.69977 2.65366 7.31167 2.96165 7.06594L2.96252 7.06524L8.42085 2.69024Z","stroke","#5A5C81"],["class","breadcrumbs_item",4,"ngFor","ngForOf"],[1,"breadcrumbs_item"],["src","./assets/images/icons/arrow-breadcrumbs.svg","alt","arrow",1,"breadcrumbs_item__arrow"],[1,"breadcrumbs_item__url",3,"routerLink","click"]],template:function(_,d){1&_&&(r.TgZ(0,"div",0)(1,"a",1),r.O4$(),r.TgZ(2,"svg",2),r._UZ(3,"path",3)(4,"path",4),r.qZA()(),r.YNc(5,Z,4,4,"div",5),r.qZA()),2&_&&(r.xp6(5),r.Q6J("ngForOf",d.breadcrumbsData))},dependencies:[S.sg,D.yS],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.breadcrumbs[_ngcontent-%COMP%]{display:flex;align-items:center}.breadcrumbs__icon[_ngcontent-%COMP%]{display:flex}.breadcrumbs__icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:.2s ease-out}.breadcrumbs__icon[_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{stroke:#111729}.breadcrumbs_item[_ngcontent-%COMP%]{display:flex}.breadcrumbs_item__url[_ngcontent-%COMP%]{margin:0 2px;color:#5a5c81;transition:.2s ease-out}.breadcrumbs_item__url.disabled[_ngcontent-%COMP%]{pointer-events:none}.breadcrumbs_item__url[_ngcontent-%COMP%]:hover{color:#111729}"]}),w})()},2914:(z,F,p)=>{"use strict";p.d(F,{D:()=>T});var r=p(1571),A=p(2722),S=p(2893),D=p(5412),Z=p(6895),R=p(9380);const w=function(M){return{height:M}};let j=(()=>{class M{constructor(y,C){this.dialogRef=y,this.data=C}get src(){return this.data}pageInitialized(y){this.height=y.source.viewer.clientHeight}}return M.\u0275fac=function(y){return new(y||M)(r.Y36(D.so),r.Y36(D.WI))},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-pdf-modal"]],decls:3,vars:8,consts:[[1,"dialog-wrap"],[1,"dialog",3,"ngStyle"],[2,"position","absolute","width","100%","height","100%","overflow","hidden","pointer-events","none",3,"src","original-size","zoom","show-borders","render-text","pages-initialized"]],template:function(y,C){1&y&&(r.TgZ(0,"div",0)(1,"div",1)(2,"pdf-viewer",2),r.NdJ("pages-initialized",function(u){return C.pageInitialized(u)}),r.qZA()()()),2&y&&(r.xp6(1),r.Q6J("ngStyle",r.VKq(6,w,C.height+"px")),r.xp6(1),r.Q6J("src",C.src)("original-size",!1)("zoom",1)("show-borders",!1)("render-text",!0))},dependencies:[Z.PC,R.rQ],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.dialog[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:auto}.dialog-wrap[_ngcontent-%COMP%]{max-height:calc(100vh - 40px)}  .ng2-pdf-viewer-container{overflow:hidden}  mat-dialog-container{margin:0 20px}"]}),M})();var _=p(4327),d=p(8033);function f(M,b){if(1&M){const y=r.EpF();r.TgZ(0,"div",9),r.NdJ("click",function(a){r.CHM(y);const u=r.oxw();return r.KtG(u.onReloadFile(a))}),r._UZ(1,"img",10),r.qZA()}}function O(M,b){if(1&M){const y=r.EpF();r.TgZ(0,"div",11),r.NdJ("click",function(a){r.CHM(y);const u=r.oxw();return r.KtG(u.onDeleteFile(a))}),r._UZ(1,"img",12),r.qZA()}}function h(M,b){if(1&M){const y=r.EpF();r.TgZ(0,"div",13),r.NdJ("click",function(a){r.CHM(y);const u=r.oxw();return r.KtG(u.onDownloadFile(a))}),r._UZ(1,"img",14),r.qZA()}}let T=(()=>{class M{constructor(y,C,a){this.uploadService=y,this.dialog=C,this.destroy$=a,this.svg="pdf-file.svg",this.deleteFileEvent=new r.vpe}get fileSize(){const C=Math.floor(Math.log(this.file.size)/Math.log(1024));return parseFloat((this.file.size/Math.pow(1024,C)).toFixed(1))+["b","kb","mb"][C]}onReloadFile(y){this.uploadService.reloadEvent$.next(!0),y.stopPropagation()}onDeleteFile(y){this.deleteFileEvent.emit(),y.stopPropagation()}onDownloadFile(y){y.stopPropagation(),(0,_.saveAs)(this.file.url||this.file,this.file.name)}openPdf(){this.url=this.url||this.file.url,this.url?this.dialog.open(j,{width:"100%",maxWidth:"976px",data:this.url}).afterClosed().pipe((0,A.R)(this.destroy$)).subscribe(()=>this.url=""):this.setUrl()}setUrl(){let y=new FileReader;y.onload=C=>{this.url=C.target.result,this.openPdf()},y.readAsArrayBuffer(this.file)}}return M.\u0275fac=function(y){return new(y||M)(r.Y36(d.C),r.Y36(D.uw),r.Y36(S.h))},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-pdf-block"]],inputs:{file:"file",isReloadBtn:"isReloadBtn",isDeleteBtn:"isDeleteBtn",isDownloadBtn:"isDownloadBtn",svg:"svg",customClass:"customClass"},outputs:{deleteFileEvent:"deleteFileEvent"},features:[r._Bn([S.h])],decls:11,vars:7,consts:[[1,"pdf",3,"ngClass","click"],["alt","PDF",1,"pdf__icon",3,"src"],[1,"pdf__content"],[1,"name"],[1,"size"],[1,"pdf__buttons"],["class","btn circle circle-blue reload",3,"click",4,"ngIf"],["class","btn circle circle-red trash",3,"click",4,"ngIf"],["class","btn circle circle-blue download",3,"click",4,"ngIf"],[1,"btn","circle","circle-blue","reload",3,"click"],["src","./assets/images/icons/reload.svg","alt","Reload"],[1,"btn","circle","circle-red","trash",3,"click"],["src","./assets/images/icons/trash-red.svg","alt","Delete"],[1,"btn","circle","circle-blue","download",3,"click"],["src","./assets/images/icons/download.svg","alt","Download"]],template:function(y,C){1&y&&(r.TgZ(0,"div",0),r.NdJ("click",function(){return C.openPdf()}),r._UZ(1,"img",1),r.TgZ(2,"div",2)(3,"div",3),r._uU(4),r.qZA(),r.TgZ(5,"div",4),r._uU(6),r.qZA()(),r.TgZ(7,"div",5),r.YNc(8,f,2,0,"div",6),r.YNc(9,O,2,0,"div",7),r.YNc(10,h,2,0,"div",8),r.qZA()()),2&y&&(r.Q6J("ngClass",C.customClass),r.xp6(1),r.Q6J("src","./assets/images/icons/"+C.svg,r.LSH),r.xp6(3),r.Oqu(C.file.name),r.xp6(2),r.Oqu(C.fileSize),r.xp6(2),r.Q6J("ngIf",C.isReloadBtn),r.xp6(1),r.Q6J("ngIf",C.isDeleteBtn),r.xp6(1),r.Q6J("ngIf",C.isDownloadBtn))},dependencies:[Z.mk,Z.O5],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.pdf[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:12px 16px;border:1px solid #D7E9FC;border-radius:6px;background-color:#fff;transition:.2s ease-out}.pdf[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 3px 6px #e6e6e6}.pdf__content[_ngcontent-%COMP%]{margin:0 12px;font-size:12px}.pdf__content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:calc(30vw - 245px);font-weight:500;transition:.2s ease-out}.pdf__content[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{color:#b2bdd0;line-height:140%}.pdf__buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin:0 0 0 auto}.pdf.list[_ngcontent-%COMP%]{padding:7px 0;border:none}.pdf.list[_ngcontent-%COMP%]   .pdf__content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:400}.pdf.list[_ngcontent-%COMP%]:hover{box-shadow:none}.pdf.list[_ngcontent-%COMP%]:hover   .pdf__content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-shadow:0 0 .5px #111729}"]}),M})()},7268:(z,F,p)=>{"use strict";p.d(F,{w:()=>C});var r=p(1571),A=p(6895);function S(a,u){if(1&a&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&a){const s=r.oxw();r.xp6(1),r.Oqu(s.title)}}function D(a,u){if(1&a&&(r.TgZ(0,"div",15),r._UZ(1,"img",16),r.TgZ(2,"div",17)(3,"div",18),r._uU(4),r.qZA(),r.TgZ(5,"div",19)(6,"div",20),r._uU(7,"Type of print:"),r.qZA(),r.TgZ(8,"div",21),r._uU(9),r.qZA()(),r.TgZ(10,"div",19)(11,"div",20),r._uU(12,"Label size:"),r.qZA(),r.TgZ(13,"div",21),r._uU(14),r.qZA()(),r.TgZ(15,"div",19)(16,"div",20),r._uU(17,"Total quantity:"),r.qZA(),r.TgZ(18,"div",21),r._uU(19),r.qZA()(),r.TgZ(20,"div",19)(21,"div",20),r._uU(22,"Price:"),r.qZA(),r.TgZ(23,"div",21),r._uU(24),r.ALo(25,"currency"),r.qZA()()()()),2&a){const s=u.$implicit;r.xp6(1),r.Q6J("src",s.productImageUrl,r.LSH),r.xp6(3),r.hij("Job #",s.id,""),r.xp6(5),r.Oqu(s.productType),r.xp6(5),r.Oqu(s.labelSize),r.xp6(5),r.Oqu(s.totalQuantity),r.xp6(5),r.Oqu(r.lcZ(25,6,s.price))}}function Z(a,u){if(1&a&&(r.TgZ(0,"div",13),r.YNc(1,D,26,8,"div",14),r.qZA()),2&a){const s=r.oxw();r.xp6(1),r.Q6J("ngForOf",s.jobs)}}function R(a,u){if(1&a&&(r.TgZ(0,"div",4)(1,"div",5),r._uU(2,"Number of jobs"),r.qZA(),r.TgZ(3,"div",22),r._uU(4),r.qZA()()),2&a){const s=r.oxw();r.xp6(4),r.hij(" ",null==s.priceDetails?null:s.priceDetails.numberOfJobs," ")}}function w(a,u){if(1&a&&(r.TgZ(0,"div",22),r._uU(1),r.ALo(2,"currency"),r.qZA()),2&a){const s=r.oxw();r.xp6(1),r.hij(" ",r.lcZ(2,1,null==s.priceDetails?null:s.priceDetails.subTotal)," ")}}function j(a,u){1&a&&(r.TgZ(0,"span",23),r._uU(1,"$\u2014.\u2014"),r.qZA())}function _(a,u){if(1&a&&(r.TgZ(0,"div",22),r._uU(1),r.ALo(2,"currency"),r.qZA()),2&a){const s=r.oxw(2);r.xp6(1),r.hij(" ",r.lcZ(2,1,null==s.priceDetails?null:s.priceDetails.gst)," ")}}function d(a,u){1&a&&(r.TgZ(0,"span",23),r._uU(1,"$\u2014.\u2014"),r.qZA())}function f(a,u){if(1&a&&(r.TgZ(0,"div",4)(1,"div",5),r._uU(2,"GST"),r.qZA(),r.YNc(3,_,3,3,"div",6),r.YNc(4,d,2,0,"ng-template",null,7,r.W1O),r.qZA()),2&a){const s=r.MAs(5),l=r.oxw();r.xp6(3),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.gst)("ngIfElse",s)}}function O(a,u){if(1&a&&(r.TgZ(0,"div",24)(1,"div",5),r._uU(2,"Voucher used"),r.qZA(),r.TgZ(3,"div",22),r._uU(4),r.ALo(5,"currency"),r.qZA()()),2&a){const s=r.oxw();r.xp6(4),r.hij(" ",r.lcZ(5,1,null==s.priceDetails?null:s.priceDetails.voucher)," ")}}function h(a,u){if(1&a&&(r.TgZ(0,"div",22),r._uU(1),r.ALo(2,"currency"),r.qZA()),2&a){const s=r.oxw(2);r.xp6(1),r.hij(" ",r.lcZ(2,1,null==s.priceDetails?null:s.priceDetails.gst)," ")}}function T(a,u){1&a&&(r.TgZ(0,"span",23),r._uU(1,"$\u2014.\u2014"),r.qZA())}function M(a,u){if(1&a&&(r.TgZ(0,"div",4)(1,"div",5),r._uU(2,"Total GST 10%"),r.qZA(),r.YNc(3,h,3,3,"div",6),r.YNc(4,T,2,0,"ng-template",null,7,r.W1O),r.qZA()),2&a){const s=r.MAs(5),l=r.oxw();r.xp6(3),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.gst)("ngIfElse",s)}}function b(a,u){if(1&a&&(r.TgZ(0,"div",4)(1,"div",5),r._uU(2,"Shipping"),r.qZA(),r.TgZ(3,"div",22),r._uU(4),r.ALo(5,"currency"),r.qZA()()),2&a){const s=r.oxw();r.xp6(4),r.hij(" ",s.isShippingString?null==s.priceDetails?null:s.priceDetails.shippingPrice:r.lcZ(5,1,null==s.priceDetails?null:s.priceDetails.shippingPrice)," ")}}function y(a,u){if(1&a&&(r.TgZ(0,"div",4)(1,"div",5),r._uU(2,"Total Net Payments AUD"),r.qZA(),r.TgZ(3,"div",22),r._uU(4),r.ALo(5,"currency"),r.qZA()()),2&a){const s=r.oxw();r.xp6(4),r.hij(" ",r.lcZ(5,1,null==s.priceDetails?null:s.priceDetails.total)," ")}}let C=(()=>{class a{get isShippingString(){return!!this.priceDetails?.shippingPrice&&isNaN(+this.priceDetails.shippingPrice)}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-price-data"]],inputs:{title:"title",priceDetails:"priceDetails",jobs:"jobs",isInvoice:"isInvoice"},decls:21,vars:14,consts:[["class","title-summary",4,"ngIf"],["class","jobs",4,"ngIf"],[1,"price"],["class","price__row row",4,"ngIf"],[1,"price__row","row"],[1,"price__title"],["class","price__value",4,"ngIf","ngIfElse"],["noValue",""],["class","price__row row red",4,"ngIf"],[1,"price__row","total","row"],[1,"total__title"],[1,"total__value"],[1,"title-summary"],[1,"jobs"],["class","job",4,"ngFor","ngForOf"],[1,"job"],["alt","Product",1,"job__img",3,"src"],[1,"job__main"],[1,"job__title"],[1,"item"],[1,"item__title"],[1,"item__value"],[1,"price__value"],[1,"no-value"],[1,"price__row","row","red"]],template:function(s,l){if(1&s&&(r.YNc(0,S,2,1,"div",0),r.YNc(1,Z,2,1,"div",1),r.TgZ(2,"div",2),r.YNc(3,R,5,1,"div",3),r.TgZ(4,"div",4)(5,"div",5),r._uU(6,"Sub total"),r.qZA(),r.YNc(7,w,3,3,"div",6),r.YNc(8,j,2,0,"ng-template",null,7,r.W1O),r.qZA(),r.YNc(10,f,6,2,"div",3),r.YNc(11,O,6,3,"div",8),r.YNc(12,M,6,2,"div",3),r.YNc(13,b,6,3,"div",3),r.YNc(14,y,6,3,"div",3),r.TgZ(15,"div",9)(16,"div",10),r._uU(17),r.qZA(),r.TgZ(18,"div",11),r._uU(19),r.ALo(20,"currency"),r.qZA()()()),2&s){const x=r.MAs(9);r.Q6J("ngIf",l.title),r.xp6(1),r.Q6J("ngIf",l.jobs),r.xp6(2),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.numberOfJobs),r.xp6(4),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.subTotal)("ngIfElse",x),r.xp6(3),r.Q6J("ngIf",!l.isInvoice),r.xp6(1),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.voucher),r.xp6(1),r.Q6J("ngIf",l.isInvoice),r.xp6(1),r.Q6J("ngIf",null==l.priceDetails?null:l.priceDetails.shippingPrice),r.xp6(1),r.Q6J("ngIf",l.isInvoice),r.xp6(3),r.hij(" ",l.isInvoice?"Amount Due AUD":"Total price"," "),r.xp6(2),r.hij(" ",r.lcZ(20,12,l.isInvoice?null==l.priceDetails?null:l.priceDetails.amountDue:null==l.priceDetails?null:l.priceDetails.total)," ")}},dependencies:[A.sg,A.O5,A.H9],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.title-summary[_ngcontent-%COMP%]{margin-bottom:12px}.jobs[_ngcontent-%COMP%]{border-bottom:1px solid #E3E8EF;margin-bottom:22px;overflow:auto;max-height:318.5px}.jobs[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;padding:12px 8px;border:1px solid #DDECFB;border-radius:6px}.jobs[_ngcontent-%COMP%]   .job__img[_ngcontent-%COMP%]{width:32px;height:32px;padding:8px;margin-right:12px;border:1px solid #EDF2FE;border-radius:6px}.jobs[_ngcontent-%COMP%]   .job__main[_ngcontent-%COMP%]{width:100%}.jobs[_ngcontent-%COMP%]   .job__title[_ngcontent-%COMP%]{margin-bottom:6px;font-weight:500;font-size:16px;line-height:130%;letter-spacing:.015em}.jobs[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2px;font-size:12px}.jobs[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]   .item__title[_ngcontent-%COMP%]{padding-right:3px;color:#5a5c81}.jobs[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]   .item__value[_ngcontent-%COMP%]{font-weight:500}.price__row[_ngcontent-%COMP%]{margin-bottom:8px}.price__row.total[_ngcontent-%COMP%]{margin-bottom:0}.price__row.total[_ngcontent-%COMP%]   .total__title[_ngcontent-%COMP%]{color:#5a5c81}.price__row.total[_ngcontent-%COMP%]   .total__value[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:24px;letter-spacing:.015em}.price__title[_ngcontent-%COMP%]{margin-right:15px;color:#5a5c81}.price__value[_ngcontent-%COMP%]{font-weight:500;line-height:130%}.price[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   .price__title[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   .price__value[_ngcontent-%COMP%]{font-weight:600;color:#d82e2e}.price[_ngcontent-%COMP%]   .no-value[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:130%;letter-spacing:.015em;color:#5a5c81;white-space:nowrap}@media screen and (max-width: 1024px){.row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.jobs[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{align-items:flex-start}.price__title[_ngcontent-%COMP%]{font-size:12px}.price__value[_ngcontent-%COMP%]{font-weight:400;font-size:14px}}"]}),a})()},3811:(z,F,p)=>{"use strict";p.d(F,{Q:()=>A});var r=p(5817);function A(S=""){return S.split(/[\s_-]+/).map(D=>(0,r.f)(D)).join(" ")}},4327:function(z,F){var A;void 0!==(A=function(){"use strict";function D(d,f,O){var h=new XMLHttpRequest;h.open("GET",d),h.responseType="blob",h.onload=function(){_(h.response,f,O)},h.onerror=function(){console.error("could not download file")},h.send()}function Z(d){var f=new XMLHttpRequest;f.open("HEAD",d,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function R(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(f)}}var w="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,j=w.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=w.saveAs||("object"!=typeof window||window!==w?function(){}:"download"in HTMLAnchorElement.prototype&&!j?function(d,f,O){var h=w.URL||w.webkitURL,T=document.createElement("a");T.download=f=f||d.name||"download",T.rel="noopener","string"==typeof d?(T.href=d,T.origin===location.origin?R(T):Z(T.href)?D(d,f,O):R(T,T.target="_blank")):(T.href=h.createObjectURL(d),setTimeout(function(){h.revokeObjectURL(T.href)},4e4),setTimeout(function(){R(T)},0))}:"msSaveOrOpenBlob"in navigator?function(d,f,O){if(f=f||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function S(d,f){return typeof f>"u"?f={autoBom:!1}:"object"!=typeof f&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,O),f);else if(Z(d))D(d,f,O);else{var h=document.createElement("a");h.href=d,h.target="_blank",setTimeout(function(){R(h)})}}:function(d,f,O,h){if((h=h||open("","_blank"))&&(h.document.title=h.document.body.innerText="downloading..."),"string"==typeof d)return D(d,f,O);var T="application/octet-stream"===d.type,M=/constructor/i.test(w.HTMLElement)||w.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||T&&M||j)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var u=y.result;u=b?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=u:location=u,h=null},y.readAsDataURL(d)}else{var C=w.URL||w.webkitURL,a=C.createObjectURL(d);h?h.location=a:location.href=a,h=null,setTimeout(function(){C.revokeObjectURL(a)},4e4)}});w.saveAs=_.saveAs=_,z.exports=_}.apply(F,[]))&&(z.exports=A)},2858:(z,F)=>{"use strict";var p=Object.prototype.hasOwnProperty;function A(R){try{return decodeURIComponent(R.replace(/\+/g," "))}catch{return null}}function S(R){try{return encodeURIComponent(R)}catch{return null}}F.stringify=function Z(R,w){w=w||"";var _,d,j=[];for(d in"string"!=typeof w&&(w="?"),R)if(p.call(R,d)){if(!(_=R[d])&&(null==_||isNaN(_))&&(_=""),d=S(d),_=S(_),null===d||null===_)continue;j.push(d+"="+_)}return j.length?w+j.join("&"):""},F.parse=function D(R){for(var _,w=/([^=?#&]+)=?([^&]*)/g,j={};_=w.exec(R);){var d=A(_[1]),f=A(_[2]);null===d||null===f||d in j||(j[d]=f)}return j}},8237:z=>{"use strict";z.exports=function(p,r){if(r=r.split(":")[0],!(p=+p))return!1;switch(r){case"http":case"ws":return 80!==p;case"https":case"wss":return 443!==p;case"ftp":return 21!==p;case"gopher":return 70!==p;case"file":return!1}return 0!==p}},7629:(z,F,p)=>{"use strict";var r=p(8237),A=p(2858),S=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,D=/[\n\r\t]/g,Z=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,R=/:\d+$/,w=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,j=/^[a-zA-Z]:/;function _(a){return(a||"").toString().replace(S,"")}var d=[["#","hash"],["?","query"],function(u,s){return h(s.protocol)?u.replace(/\\/g,"/"):u},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function O(a){var u;u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var U,l={},x=typeof(a=a||u.location||{});if("blob:"===a.protocol)l=new b(unescape(a.pathname),{});else if("string"===x)for(U in l=new b(a,{}),f)delete l[U];else if("object"===x){for(U in a)U in f||(l[U]=a[U]);void 0===l.slashes&&(l.slashes=Z.test(a.href))}return l}function h(a){return"file:"===a||"ftp:"===a||"http:"===a||"https:"===a||"ws:"===a||"wss:"===a}function T(a,u){a=(a=_(a)).replace(D,""),u=u||{};var E,s=w.exec(a),l=s[1]?s[1].toLowerCase():"",x=!!s[2],U=!!s[3],k=0;return x?U?(E=s[2]+s[3]+s[4],k=s[2].length+s[3].length):(E=s[2]+s[4],k=s[2].length):U?(E=s[3]+s[4],k=s[3].length):E=s[4],"file:"===l?k>=2&&(E=E.slice(2)):h(l)?E=s[4]:l?x&&(E=E.slice(2)):k>=2&&h(u.protocol)&&(E=s[4]),{protocol:l,slashes:x||h(l),slashesCount:k,rest:E}}function b(a,u,s){if(a=(a=_(a)).replace(D,""),!(this instanceof b))return new b(a,u,s);var l,x,U,k,E,q,N=d.slice(),Q=typeof u,m=this,X=0;for("object"!==Q&&"string"!==Q&&(s=u,u=null),s&&"function"!=typeof s&&(s=A.parse),l=!(x=T(a||"",u=O(u))).protocol&&!x.slashes,m.slashes=x.slashes||l&&u.slashes,m.protocol=x.protocol||u.protocol||"",a=x.rest,("file:"===x.protocol&&(2!==x.slashesCount||j.test(a))||!x.slashes&&(x.protocol||x.slashesCount<2||!h(m.protocol)))&&(N[3]=[/(.*)/,"pathname"]);X<N.length;X++)"function"!=typeof(k=N[X])?(q=k[1],(U=k[0])!=U?m[q]=a:"string"==typeof U?~(E="@"===U?a.lastIndexOf(U):a.indexOf(U))&&("number"==typeof k[2]?(m[q]=a.slice(0,E),a=a.slice(E+k[2])):(m[q]=a.slice(E),a=a.slice(0,E))):(E=U.exec(a))&&(m[q]=E[1],a=a.slice(0,E.index)),m[q]=m[q]||l&&k[3]&&u[q]||"",k[4]&&(m[q]=m[q].toLowerCase())):a=k(a,m);s&&(m.query=s(m.query)),l&&u.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==u.pathname)&&(m.pathname=function M(a,u){if(""===a)return u;for(var s=(u||"/").split("/").slice(0,-1).concat(a.split("/")),l=s.length,x=s[l-1],U=!1,k=0;l--;)"."===s[l]?s.splice(l,1):".."===s[l]?(s.splice(l,1),k++):k&&(0===l&&(U=!0),s.splice(l,1),k--);return U&&s.unshift(""),("."===x||".."===x)&&s.push(""),s.join("/")}(m.pathname,u.pathname)),"/"!==m.pathname.charAt(0)&&h(m.protocol)&&(m.pathname="/"+m.pathname),r(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(~(E=m.auth.indexOf(":"))?(m.username=m.auth.slice(0,E),m.username=encodeURIComponent(decodeURIComponent(m.username)),m.password=m.auth.slice(E+1),m.password=encodeURIComponent(decodeURIComponent(m.password))):m.username=encodeURIComponent(decodeURIComponent(m.auth)),m.auth=m.password?m.username+":"+m.password:m.username),m.origin="file:"!==m.protocol&&h(m.protocol)&&m.host?m.protocol+"//"+m.host:"null",m.href=m.toString()}b.prototype={set:function y(a,u,s){var l=this;switch(a){case"query":"string"==typeof u&&u.length&&(u=(s||A.parse)(u)),l[a]=u;break;case"port":l[a]=u,r(u,l.protocol)?u&&(l.host=l.hostname+":"+u):(l.host=l.hostname,l[a]="");break;case"hostname":l[a]=u,l.port&&(u+=":"+l.port),l.host=u;break;case"host":l[a]=u,R.test(u)?(u=u.split(":"),l.port=u.pop(),l.hostname=u.join(":")):(l.hostname=u,l.port="");break;case"protocol":l.protocol=u.toLowerCase(),l.slashes=!s;break;case"pathname":case"hash":if(u){var x="pathname"===a?"/":"#";l[a]=u.charAt(0)!==x?x+u:u}else l[a]=u;break;case"username":case"password":l[a]=encodeURIComponent(u);break;case"auth":var U=u.indexOf(":");~U?(l.username=u.slice(0,U),l.username=encodeURIComponent(decodeURIComponent(l.username)),l.password=u.slice(U+1),l.password=encodeURIComponent(decodeURIComponent(l.password))):l.username=encodeURIComponent(decodeURIComponent(u))}for(var k=0;k<d.length;k++){var E=d[k];E[4]&&(l[E[1]]=l[E[1]].toLowerCase())}return l.auth=l.password?l.username+":"+l.password:l.username,l.origin="file:"!==l.protocol&&h(l.protocol)&&l.host?l.protocol+"//"+l.host:"null",l.href=l.toString(),l},toString:function C(a){(!a||"function"!=typeof a)&&(a=A.stringify);var u,s=this,l=s.host,x=s.protocol;x&&":"!==x.charAt(x.length-1)&&(x+=":");var U=x+(s.protocol&&s.slashes||h(s.protocol)?"//":"");return s.username?(U+=s.username,s.password&&(U+=":"+s.password),U+="@"):s.password?(U+=":"+s.password,U+="@"):"file:"!==s.protocol&&h(s.protocol)&&!l&&"/"!==s.pathname&&(U+="@"),(":"===l[l.length-1]||R.test(s.hostname)&&!s.port)&&(l+=":"),U+=l+s.pathname,(u="object"==typeof s.query?a(s.query):s.query)&&(U+="?"!==u.charAt(0)?"?"+u:u),s.hash&&(U+=s.hash),U}},b.extractProtocol=T,b.location=O,b.trimLeft=_,b.qs=A,z.exports=b}}]);