"use strict";(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[507],{2810:(A,D,i)=>{i.d(D,{H:()=>e});const e={LOCK:{src:"../../../../assets/images/icons/lock.svg",alt:"Lock"},EMAIL:{src:"../../../../assets/images/icons/email.svg",alt:"Email"},WALLET:{src:"../../../../assets/images/icons/wallet.svg",alt:"Wallet"}}},9356:(A,D,i)=>{i.d(D,{W:()=>e});var e=(()=>{return(a=e||(e={})).Yes="Yes",a.No="No",e;var a})()},8767:(A,D,i)=>{i.d(D,{D:()=>y});var e=i(8760),a=i(1571),x=i(5384),t=i(7662);let y=(()=>{class f{constructor(c,h){this.apiService=c,this.customersService=h}getAddresses(c){return this.apiService.get(e.T5.ADDRESSES+c)}getAddress(c){return this.apiService.get(e.wY.generate(e.T5.ADDRESS_BY_ID,{addressId:c}))}saveAddress(c,h,M){return M?c?this.customersService.editAddress(h):this.customersService.addNewAddress(h):c?this.editAddress(h):this.addNewAddress(h)}addNewAddress(c){return this.apiService.post(e.wY.generate(e.T5.ADDRESS_BY_ID,{addressId:c.id}),c)}editAddress(c){return this.apiService.put(`${e.T5.ADDRESSES}/${c.id}`,c)}deleteAddress(c){return this.apiService.delete(`${e.T5.ADDRESSES}/${c}`)}searchAddress(c){return this.apiService.get(e.T5.ADDRESSR+`?q=${c}`)}getDataByAddressId(c){return this.apiService.get(e.wY.generate(e.T5.ADDRESSR_BY_ID,{id:c}))}}return f.\u0275fac=function(c){return new(c||f)(a.LFG(x.s),a.LFG(t.v))},f.\u0275prov=a.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},7662:(A,D,i)=>{i.d(D,{v:()=>t});var e=i(8760),a=i(1571),x=i(5384);let t=(()=>{class y{constructor(p){this.apiService=p}getCustomersList(p){return this.apiService.get(e.T5.CUSTOMERS+p)}getCustomersDetails(){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_BY_ID,{customerId:this.companyId}))}getCompanyAddresses(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_ADDRESS,{customerId:this.companyId})+p)}getCompanyAddress(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_USER_ADDRESS,{customerId:this.companyId,addressId:p}))}addNewAddress(p){return this.apiService.post(e.wY.generate(e.T5.CUSTOMERS_ADDRESS,{customerId:this.companyId}),p)}editAddress(p){return this.apiService.put(e.wY.generate(e.T5.CUSTOMERS_USER_ADDRESS,{customerId:this.companyId,addressId:p.id}),p)}getCompanyEmployees(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_EMPLOYEES,{customerId:this.companyId})+p)}getCompanyEmployee(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_USER_EMPLOYEE,{customerId:this.companyId,userId:p}))}addNewEmployee(p){return this.apiService.post(e.wY.generate(e.T5.CUSTOMERS_EMPLOYEE,{customerId:this.companyId}),p)}editEmployee(p){return this.apiService.put(e.wY.generate(e.T5.CUSTOMERS_USER_EMPLOYEE,{customerId:this.companyId,userId:p.id}),p)}getCompanyOrders(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_ORDERS,{customerId:this.companyId})+p)}getCompanyInvoices(p){return this.apiService.get(e.wY.generate(e.T5.CUSTOMERS_INVOICES,{customerId:this.companyId})+p)}deleteCustomer(p){return this.apiService.delete(`${e.T5.CUSTOMERS}/${p}`)}deleteCustomers(p){return this.apiService.delete(e.T5.CUSTOMERS,{ids:p})}deleteAddress(p){return this.apiService.delete(e.wY.generate(e.T5.CUSTOMERS_USER_ADDRESS,{customerId:this.companyId,addressId:p}))}deleteEmployee(p){return this.apiService.delete(e.wY.generate(e.T5.CUSTOMERS_USER_EMPLOYEE,{customerId:this.companyId,userId:p}))}}return y.\u0275fac=function(p){return new(p||y)(a.LFG(x.s))},y.\u0275prov=a.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},9878:(A,D,i)=>{i.d(D,{g:()=>c});var e=i(8760),a=i(4198),x=i(4004),t=i(6457),y=i(1571),f=i(5384),p=i(7662);let c=(()=>{class h{constructor(C,b){this.apiService=C,this.customersService=b}saveEmployee(C,b){const _=C.id;return b?_?this.customersService.editEmployee(C):this.customersService.addNewEmployee(C):_?this.editEmployee(C):this.addNewEmployee(C)}addNewEmployee(C){return this.apiService.post(e.T5.SETTINGS_EMPLOYEE,C)}editEmployee(C){return this.apiService.put(e.T5.SETTINGS_EMPLOYEE,C)}getPersonalSettings(){return this.apiService.get(e.T5.SETTINGS_PERSONAL)}postPersonalSettings(C){return this.apiService.post(e.T5.SETTINGS_PERSONAL,(0,t.hl)(C))}getCompanySettings(C){return this.apiService.get(C?e.wY.generate(e.T5.CUSTOMERS_BY_ID,{customerId:C}):e.T5.SETTINGS_COMPANY_DETAILS)}postCompanySettings(C,b){return b?this.apiService.postFormData(e.wY.generate(e.T5.CUSTOMERS_BY_ID,{customerId:b}),{...C,id:b}):this.apiService.postFormData(e.T5.SETTINGS_COMPANY_DETAILS,C)}getDeliverySettings(){return this.apiService.get(e.T5.SETTINGS_DELIVERY)}postDeliverySettings(C){return this.apiService.post(e.T5.SETTINGS_DELIVERY,function b(_){return{addLogoToBox:(0,a.O)(_.addLogoToBox),deliveryType:_.deliveryType.toLowerCase(),defaultAddressId:_.defaultAddressId,addressOptions:_.addressOptions,defaultUsersAddressId:_.defaultUsersAddressId,deliveryUsersOptions:_.deliveryUsersOptions}}(C))}getNotificationsSettings(){return this.apiService.get(e.T5.SETTINGS_NOTIFICATION).pipe((0,x.U)(C=>C.settings))}postNotificationsSettings(C){return this.apiService.post(e.T5.SETTINGS_NOTIFICATION,C)}}return h.\u0275fac=function(C){return new(C||h)(y.LFG(f.s),y.LFG(p.v))},h.\u0275prov=y.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},9576:(A,D,i)=>{i.d(D,{f:()=>y});var e=i(8760),a=i(6457),x=i(1571),t=i(5384);let y=(()=>{class f{constructor(c){this.apiService=c}getUsers(c){return this.apiService.get(e.T5.SETTINGS_EMPLOYEES+c)}getUser(c){return this.apiService.get(`${e.T5.SETTINGS_EMPLOYEES}/${c}`)}saveUser(c,h){return h?this.editUser(c):this.addUser(c)}deleteUser(c){return this.apiService.delete(`${e.T5.SETTINGS_EMPLOYEES}/${c}`)}changeGlobalNotificationsReceiver(c,h){return this.apiService.post(`${e.T5.SETTINGS_EMPLOYEES}/${c}/notifications`,{isGlobalNotificationsReceiver:h})}addUser(c){return this.apiService.post(e.T5.SETTINGS_EMPLOYEES,(0,a.hl)(c))}editUser(c){return this.apiService.put(`${e.T5.SETTINGS_EMPLOYEES}/${c.id}`,c)}}return f.\u0275fac=function(c){return new(c||f)(x.LFG(t.s))},f.\u0275prov=x.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9463:(A,D,i)=>{i.d(D,{s:()=>$});var e=i(1571),a=i(4006),x=i(7795),t=i(9673),y=i(8112),f=i(7579),p=i(8372),c=i(1884),h=i(2722),M=i(262),C=i(2843),b=i(2893),_=i(221),w=i(9418),L=i(9777),s=i(5412),Y=i(7188),S=i(9878),F=i(8767),W=i(6895),K=i(42),R=i(6885),J=i(605);const G=["logoUpload"];function Q(T,Z){1&T&&(e.TgZ(0,"h3",35),e._uU(1,"Company details"),e.qZA())}function P(T,Z){if(1&T&&e._UZ(0,"img",36),2&T){const r=e.oxw(3);e.Q6J("src",r.logoPath,e.LSH)}}function I(T,Z){1&T&&(e.TgZ(0,"h3",35),e._uU(1,"Company information"),e.qZA())}function v(T,Z){1&T&&(e.TgZ(0,"h3",35),e._uU(1,"Company address"),e.qZA())}function u(T,Z){if(1&T){const r=e.EpF();e.TgZ(0,"form",3)(1,"div",4),e.YNc(2,Q,2,0,"h3",5),e.TgZ(3,"div",6)(4,"input",7,8),e.NdJ("change",function(g){e.CHM(r);const B=e.oxw(2);return e.KtG(B.imagePreview(g))}),e.qZA(),e.TgZ(6,"div",9)(7,"div",10),e.YNc(8,P,1,1,"img",11),e.qZA(),e.TgZ(9,"div",12)(10,"div",13)(11,"p",14),e._uU(12,"Format: PNG, JPG, JPEG."),e.qZA(),e.TgZ(13,"p",14),e._uU(14," The maximum file size is 5 mb. "),e.qZA()(),e.TgZ(15,"div",15)(16,"app-button",16),e.NdJ("clickEvent",function(){e.CHM(r);const g=e.oxw(2);return e.KtG(g.reloadFile())}),e.qZA(),e.TgZ(17,"app-button",16),e.NdJ("clickEvent",function(){e.CHM(r);const g=e.oxw(2);return e.KtG(g.deleteLogo())}),e.qZA()()()()()(),e.TgZ(18,"div",17),e.YNc(19,I,2,0,"h3",5),e.TgZ(20,"div",18)(21,"div",6),e._UZ(22,"app-field",19),e.qZA(),e.TgZ(23,"div",6),e._UZ(24,"app-field",20),e.qZA()(),e.TgZ(25,"div",18)(26,"div",6),e._UZ(27,"app-field",21),e.qZA(),e.TgZ(28,"div",6),e._UZ(29,"app-field",22),e.qZA()(),e.TgZ(30,"div",6),e._UZ(31,"app-field",23),e.qZA(),e.TgZ(32,"div",18)(33,"div",6),e._UZ(34,"app-field",24),e.qZA(),e.TgZ(35,"div",6),e._UZ(36,"app-field",25),e.qZA()()(),e.TgZ(37,"div",26),e.YNc(38,v,2,0,"h3",5),e.TgZ(39,"div",18)(40,"div",6)(41,"app-field",27),e.NdJ("inputEvent",function(g){e.CHM(r);const B=e.oxw(2);return e.KtG(B.searchAddress(g))})("selectedEvent",function(g){e.CHM(r);const B=e.oxw(2);return e.KtG(B.selectAddress(g))}),e.qZA()(),e.TgZ(42,"div",6),e._UZ(43,"app-field",28),e.qZA()(),e.TgZ(44,"div",18)(45,"div",6),e._UZ(46,"app-field",29),e.qZA(),e.TgZ(47,"div",6),e._UZ(48,"app-field",30),e.qZA()(),e.TgZ(49,"div",18)(50,"div",6),e._UZ(51,"app-field",31),e.qZA(),e.TgZ(52,"div",6),e._UZ(53,"app-field",32),e.qZA()()(),e.TgZ(54,"div",33)(55,"app-button",16),e.NdJ("clickEvent",function(){e.CHM(r);const g=e.oxw(2);return e.KtG(g.cancel())}),e.qZA(),e.TgZ(56,"app-button",34),e.NdJ("clickEvent",function(){e.CHM(r);const g=e.oxw(2);return e.KtG(g.submitForm())}),e.qZA()()()}if(2&T){const r=e.oxw(2);e.Q6J("formGroup",r.form),e.xp6(2),e.Q6J("ngIf",!r.customerId),e.xp6(6),e.Q6J("ngIf",r.logoPath),e.xp6(5),e.ekj("error",r.isLogoSizeError),e.xp6(3),e.Q6J("buttonConfig",r.uploadLogoButtonConfig),e.xp6(1),e.Q6J("buttonConfig",r.deleteLogoButtonConfig),e.xp6(2),e.Q6J("ngIf",!r.customerId),e.xp6(3),e.Q6J("control",r.form.controls.companyName)("label","Company Name")("type",r.FIELD_TYPES.Text)("placeholder","Company Name"),e.xp6(2),e.Q6J("control",r.form.controls.website)("label","Website")("type",r.FIELD_TYPES.Text)("placeholder","Website"),e.xp6(3),e.Q6J("control",r.form.controls.email)("label","Company email")("type",r.FIELD_TYPES.Email)("placeholder","your@mail.com"),e.xp6(2),e.Q6J("control",r.form.controls.secondaryEmail)("label","Secondary email")("type",r.FIELD_TYPES.Email)("placeholder","your@mail.com"),e.xp6(2),e.Q6J("control",r.form.controls.defaultProofEmail)("label","Default proof email")("type",r.FIELD_TYPES.Selector)("options",r.companyDetails.defaultProofEmailOptions)("placeholder","Choose option"),e.xp6(3),e.Q6J("control",r.form.controls.phone)("label","Phone number")("type",r.FIELD_TYPES.Text)("mask",r.phoneMask)("placeholder","0000000000"),e.xp6(2),e.Q6J("control",r.form.controls.mainContact)("label","Main contact")("type",r.FIELD_TYPES.Selector)("options",r.companyDetails.contactOptions)("placeholder","Main contact"),e.xp6(2),e.Q6J("ngIf",!r.customerId),e.xp6(3),e.Q6J("control",r.form.controls.address1)("label","Address Line")("type",r.FIELD_TYPES.Text)("placeholder","Address Line")("isAutocomplete",!1)("setOptionsBySearch",r.listOfAddtessString),e.xp6(2),e.Q6J("control",r.form.controls.address2)("label","Address Line 2")("type",r.FIELD_TYPES.Text)("placeholder","Address Line 2"),e.xp6(3),e.Q6J("control",r.form.controls.state)("label","State")("type",r.FIELD_TYPES.Text)("placeholder","State"),e.xp6(2),e.Q6J("control",r.form.controls.suburb)("label","Suburb")("type",r.FIELD_TYPES.Text)("placeholder","Suburb"),e.xp6(3),e.Q6J("control",r.form.controls.postcode)("label","Postcode")("type",r.FIELD_TYPES.Text)("placeholder","0000"),e.xp6(2),e.Q6J("control",r.form.controls.abn)("label","ABN")("type",r.FIELD_TYPES.Text)("placeholder","ISBE"),e.xp6(2),e.Q6J("buttonConfig",r.buttonCancelConfig),e.xp6(1),e.Q6J("buttonConfig",r.buttonSubmitConfig)("isLoaded",r.isLoadedBtn)}}function U(T,Z){if(1&T&&(e.ynx(0),e.YNc(1,u,57,69,"form",2),e.BQk()),2&T){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.companyDetails)}}function V(T,Z){1&T&&(e.TgZ(0,"div",37),e._UZ(1,"app-loader"),e.qZA())}let $=(()=>{class T{constructor(r,E,g,B,H,z){this.formBuilder=r,this.destroy$=E,this.settingsService=g,this.dialog=B,this.addressService=H,this.cdr=z,this.closeEvent=new e.vpe,this.phoneMask=_.gP,this.FIELD_TYPES=x.U,this.listOfAddtess=[],this.listOfAddtessString=[],this.isLoadedBtn=!0,this.searchAddressSubject$=new f.x,this.uploadLogoButtonConfig={text:"Upload logo",viewType:t.F.Filled,minWidth:"170px"},this.deleteLogoButtonConfig={text:"Delete logo",viewType:t.F.Text,color:"#FF5858",minWidth:"120px"},this.buttonSubmitConfig={text:"Save",type:y.L.Submit,viewType:t.F.Filled,minWidth:"174px"},this.buttonCancelConfig={text:"Cancel",type:y.L.Button,viewType:t.F.LightBlue,minWidth:"174px"},this.dialogSuccessConfig={title:"Success!",isSuccess:!0}}ngOnInit(){this.getData(),this.subscribeToSearchAddress()}subscribeToSearchAddress(){this.searchAddressSubject$.pipe((0,p.b)(500),(0,c.x)(),(0,h.R)(this.destroy$)).subscribe(r=>{this.addressService.searchAddress(r).pipe((0,h.R)(this.destroy$)).subscribe(E=>{this.listOfAddtess=E,this.listOfAddtessString=E.map(g=>g.shortAddress),this.cdr.detectChanges()})})}imagePreview(r){let E=r.target.files;if(E=E?E[0]:null,E){if(this.checkFile(E),this.isLogoSizeError||this.isLogoFormatError)return void this.form.patchValue({companyLogo:null});this.form.patchValue({companyLogo:E});const g=new FileReader;g.onload=()=>{this.logoPath=g.result},g.readAsDataURL(E)}}checkFile(r){this.isLogoSizeError=r.size>=5e6}openSuccessDialog(){let r=new s.vA;r={...r,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogSuccessConfig},this.dialog.open(Y.a,r)}reloadFile(){!this.logoUploadEl||this.logoUploadEl.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}deleteLogo(){this.logoPath="",this.logoUploadEl.nativeElement.value="",this.form.get("companyLogo")?.setValue("")}cancel(){this.isLogoSizeError=!1,this.isLogoFormatError=!1,this.logoPath=this.companyDetailsInitialValue.companyLogo,this.logoUploadEl.nativeElement.value="",this.form.setValue(this.companyDetailsInitialValue),this.form.markAsUntouched(),this.closeEvent.emit(w.u.Close)}getData(){this.settingsService.getCompanySettings(this.customerId).pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.companyDetails={...r,defaultProofEmailOptions:[{id:-1,label:"No default proof email"},...r.defaultProofEmailOptions]},this.logoPath=this.companyDetails.companyLogo,this.initForm(),this.isDataLoaded=!0})}initForm(){this.form=this.formBuilder.nonNullable.group({companyLogo:[this.companyDetails.companyLogo||File||""],companyName:[this.companyDetails.companyName||"",[a.kI.required]],website:[this.companyDetails.website||"",[a.kI.required]],email:[this.companyDetails.email||"",[a.kI.required,a.kI.email]],secondaryEmail:[this.companyDetails.secondaryEmail||"",[a.kI.email]],defaultProofEmail:[this.setProofEmail(this.companyDetails.defaultProofEmailId)],defaultProofEmailId:this.companyDetails.defaultProofEmailId||"",phone:[this.companyDetails.phone||"",[a.kI.required]],mainContact:[this.setMainContact(this.companyDetails.mainContactId),[a.kI.required]],mainContactId:[this.companyDetails.mainContactId||""],address1:[this.companyDetails.address1||"",a.kI.required],address2:[this.companyDetails.address2||""],state:[this.companyDetails.state||"",[a.kI.required]],suburb:[this.companyDetails.suburb||"",[a.kI.required]],postcode:[this.companyDetails.postcode||"",[a.kI.required]],abn:[this.companyDetails.abn||"",[a.kI.required]]}),this.companyDetailsInitialValue=this.form.value,this.subscribeToForm()}setProofEmail(r){return this.companyDetails.defaultProofEmailOptions.find(g=>g?.id===r)||null}setMainContact(r){return this.companyDetails.contactOptions?.find(g=>g.id===r)||null}subscribeToForm(){this.form.get("mainContact")?.valueChanges.pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.form.get("mainContactId")?.setValue(r?.id)}),this.form.get("defaultProofEmail")?.valueChanges.pipe((0,h.R)(this.destroy$)).subscribe(r=>{const E=r?.id&&-1!==r?.id?r.id:"";this.form.get("defaultProofEmailId")?.setValue(E),-1===r?.id&&this.form.get("defaultProofEmail")?.reset("")})}submitForm(){this.form.invalid||this.isLogoSizeError||this.isLogoFormatError?this.form.markAllAsTouched():(this.isLoadedBtn=!1,this.settingsService.postCompanySettings(this.form.value,this.customerId).pipe((0,h.R)(this.destroy$),(0,M.K)(r=>(this.isLoadedBtn=!0,(0,L.d)(this.form,r),(0,C._)(()=>new Error(r))))).subscribe(()=>{this.companyDetailsInitialValue=this.form.value,this.isLoadedBtn=!0,this.openSuccessDialog(),this.closeEvent.emit()}))}searchAddress(r){r.length<3?this.listOfAddtessString=[]:this.searchAddressSubject$.next(r.trimStart())}selectAddress(r){const E=this.listOfAddtess.find(g=>g.shortAddress===r);!E||this.addressService.getDataByAddressId(E.id).pipe((0,h.R)(this.destroy$)).subscribe(g=>{this.form.setValue({...this.form.value,address1:g.addressLine,postcode:g.postcode,state:g.state,suburb:g.suburb}),this.cdr.detectChanges()})}}return T.\u0275fac=function(r){return new(r||T)(e.Y36(a.qu),e.Y36(b.h),e.Y36(S.g),e.Y36(s.uw),e.Y36(F.D),e.Y36(e.sBO))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-company-details"]],viewQuery:function(r,E){if(1&r&&e.Gf(G,5),2&r){let g;e.iGM(g=e.CRH())&&(E.logoUploadEl=g.first)}},inputs:{customerId:"customerId"},outputs:{closeEvent:"closeEvent"},features:[e._Bn([b.h])],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","form","autocomplete","off",3,"formGroup",4,"ngIf"],["autocomplete","off",1,"form",3,"formGroup"],[1,"block","photo"],["class","title",4,"ngIf"],[1,"field"],["type","file","accept","image/*",1,"file-input",3,"change"],["logoUpload",""],[1,"logo"],[1,"image"],[3,"src",4,"ngIf"],[1,"controls"],[1,"description"],[1,"text"],[1,"buttons"],[3,"buttonConfig","clickEvent"],[1,"block","info"],[1,"fields"],["formControlName","companyName",3,"control","label","type","placeholder"],["formControlName","website",3,"control","label","type","placeholder"],["formControlName","email",3,"control","label","type","placeholder"],["formControlName","secondaryEmail",3,"control","label","type","placeholder"],["formControlName","defaultProofEmail",3,"control","label","type","options","placeholder"],["formControlName","phone",3,"control","label","type","mask","placeholder"],["formControlName","mainContact",3,"control","label","type","options","placeholder"],[1,"block","address"],["formControlName","address1",3,"control","label","type","placeholder","isAutocomplete","setOptionsBySearch","inputEvent","selectedEvent"],["formControlName","address2",3,"control","label","type","placeholder"],["formControlName","state",3,"control","label","type","placeholder"],["formControlName","suburb",3,"control","label","type","placeholder"],["formControlName","postcode",3,"control","label","type","placeholder"],["formControlName","abn",3,"control","label","type","placeholder"],[1,"submit"],[3,"buttonConfig","isLoaded","clickEvent"],[1,"title"],[3,"src"],[1,"loader-wrap"]],template:function(r,E){if(1&r&&(e.YNc(0,U,2,1,"ng-container",0),e.YNc(1,V,2,0,"ng-template",null,1,e.W1O)),2&r){const g=e.MAs(2);e.Q6J("ngIf",E.isDataLoaded)("ngIfElse",g)}},dependencies:[W.O5,K.r,R.C,a._Y,a.JJ,a.JL,a.sg,a.u,J.R],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}  .ng2-pdf-viewer-container{overflow:hidden!important}.block[_ngcontent-%COMP%]{margin-bottom:48px}.block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:24px;font-weight:600;font-size:16px;line-height:24px}.field[_ngcontent-%COMP%]{margin-bottom:32px;position:relative;transition:.3s ease-out}.field__name[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;font-size:12px;line-height:18px;letter-spacing:.015em}.field__errors[_ngcontent-%COMP%]{position:absolute;margin-top:4px;font-size:10px;line-height:100%;color:#d82e2e}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;column-gap:16px}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:88px;height:88px;border-radius:50%;overflow:hidden;border:1px solid #D7E9FC}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:88px;height:88px;object-fit:cover}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-bottom:14px}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0;font-size:12px;line-height:18px;letter-spacing:.015em;color:#90a3bf;transition:.2s ease-in}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .text.error[_ngcontent-%COMP%]{color:#d82e2e}.field[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.fields[_ngcontent-%COMP%]{display:flex;column-gap:32px}.fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{flex-grow:1}.submit[_ngcontent-%COMP%]{padding-top:16px;display:flex;justify-content:center;column-gap:16px}.file-input[_ngcontent-%COMP%]{display:none}"]}),T})()},7507:(A,D,i)=>{i.r(D),i.d(D,{SettingsModule:()=>Yt});var e=i(6895),a=i(5453),x=i(2893),t=i(1571),y=i(1438);function f(n,d){1&n&&(t.TgZ(0,"li",11)(1,"div",12),t.O4$(),t.TgZ(2,"svg",13),t._UZ(3,"path",14)(4,"path",15),t.qZA(),t.kcU(),t.TgZ(5,"span",16),t._uU(6,"Personal information"),t.qZA()()())}function p(n,d){1&n&&(t.TgZ(0,"li",17)(1,"div",12),t.O4$(),t.TgZ(2,"svg",13),t._UZ(3,"path",18)(4,"path",19)(5,"path",20)(6,"path",21)(7,"path",22),t.qZA(),t.kcU(),t.TgZ(8,"span",16),t._uU(9,"Company details"),t.qZA()()())}function c(n,d){1&n&&(t.TgZ(0,"li",23)(1,"div",12),t.O4$(),t.TgZ(2,"svg",24),t._UZ(3,"path",25)(4,"path",26)(5,"path",27)(6,"path",28)(7,"path",29),t.qZA(),t.kcU(),t.TgZ(8,"span",16),t._uU(9,"Delivery settings"),t.qZA()()())}function h(n,d){1&n&&(t.TgZ(0,"li",30)(1,"div",12),t.O4$(),t.TgZ(2,"svg",13),t._UZ(3,"path",14)(4,"path",15),t.qZA(),t.kcU(),t.TgZ(5,"span",16),t._uU(6,"Users"),t.qZA()()())}function M(n,d){1&n&&(t.TgZ(0,"li",31)(1,"div",12),t.O4$(),t.TgZ(2,"svg",13),t._UZ(3,"path",32)(4,"path",33)(5,"path",34),t.qZA(),t.kcU(),t.TgZ(6,"span",16),t._uU(7,"Notifications"),t.qZA()()())}const C=function(n){return{delivery:n}};let b=(()=>{class n{constructor(o,l){this.authService=o,this.router=l,this.routerItems=[],this.router.events.subscribe(m=>{m instanceof a.m2&&(this.isDeliveryPage=l.url.includes("delivery-settings"))})}get isAdmin(){return this.authService.isAdmin}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(y.Z),t.Y36(a.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],features:[t._Bn([x.h])],decls:13,vars:8,consts:[[1,"settings"],[1,"settings__title"],[1,"settings_wrap"],[1,"settings_navigation"],[1,"list"],["class","item","routerLink","personal-information","routerLinkActive","active",4,"ngIf"],["class","item","routerLink","company-details","routerLinkActive","active",4,"ngIf"],["class","item","routerLink","delivery-settings","routerLinkActive","active",4,"ngIf"],["class","item","routerLink","users","routerLinkActive","active",4,"ngIf"],["class","item","routerLink","notifications","routerLinkActive","active",4,"ngIf"],[1,"settings_main",3,"ngClass"],["routerLink","personal-information","routerLinkActive","active",1,"item"],[1,"item_wrap"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg",1,"item__icon"],["d","M7.99996 7.9987C9.84091 7.9987 11.3333 6.50631 11.3333 4.66536C11.3333 2.82442 9.84091 1.33203 7.99996 1.33203C6.15901 1.33203 4.66663 2.82442 4.66663 4.66536C4.66663 6.50631 6.15901 7.9987 7.99996 7.9987Z","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["d","M13.7268 14.6667C13.7268 12.0867 11.1601 10 8.0001 10C4.8401 10 2.27344 12.0867 2.27344 14.6667","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],[1,"item__title"],["routerLink","company-details","routerLinkActive","active",1,"item"],["d","M2.00684 7.48047V10.4738C2.00684 13.4671 3.20684 14.6671 6.20017 14.6671H9.7935C12.7868 14.6671 13.9868 13.4671 13.9868 10.4738V7.48047","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["d","M7.99999 7.9987C9.21999 7.9987 10.12 7.00536 9.99999 5.78536L9.55999 1.33203H6.44666L5.99999 5.78536C5.87999 7.00536 6.77999 7.9987 7.99999 7.9987Z","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["d","M12.2065 7.9987C13.5532 7.9987 14.5399 6.90536 14.4065 5.56536L14.2199 3.73203C13.9799 1.9987 13.3132 1.33203 11.5665 1.33203H9.5332L9.99987 6.00536C10.1132 7.10536 11.1065 7.9987 12.2065 7.9987Z","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["d","M3.75992 7.9987C4.85992 7.9987 5.85325 7.10536 5.95992 6.00536L6.10659 4.53203L6.42659 1.33203H4.39326C2.64659 1.33203 1.97992 1.9987 1.73992 3.73203L1.55992 5.56536C1.42659 6.90536 2.41326 7.9987 3.75992 7.9987Z","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["d","M7.99967 11.332C6.88634 11.332 6.33301 11.8854 6.33301 12.9987V14.6654H9.66634V12.9987C9.66634 11.8854 9.11301 11.332 7.99967 11.332Z","stroke","#020203","stroke-linecap","round","stroke-linejoin","round"],["routerLink","delivery-settings","routerLinkActive","active",1,"item"],["width","17","height","17","viewBox","0 0 17 17","fill","none","xmlns","http://www.w3.org/2000/svg",1,"item__icon"],["d","M10.4997 1.83398V8.50065C10.4997 9.23398 9.89967 9.83398 9.16634 9.83398H1.83301V4.50065C1.83301 3.02732 3.02634 1.83398 4.49967 1.83398H10.4997Z","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["d","M15.1663 9.83398V11.834C15.1663 12.9407 14.273 13.834 13.1663 13.834H12.4997C12.4997 13.1007 11.8997 12.5007 11.1663 12.5007C10.433 12.5007 9.83301 13.1007 9.83301 13.834H7.16634C7.16634 13.1007 6.56634 12.5007 5.83301 12.5007C5.09967 12.5007 4.49967 13.1007 4.49967 13.834H3.83301C2.72634 13.834 1.83301 12.9407 1.83301 11.834V9.83398H9.16634C9.89967 9.83398 10.4997 9.23398 10.4997 8.50065V3.83398H11.7263C12.2063 3.83398 12.6463 4.09399 12.8863 4.50732L14.0263 6.50065H13.1663C12.7997 6.50065 12.4997 6.80065 12.4997 7.16732V9.16732C12.4997 9.53398 12.7997 9.83398 13.1663 9.83398H15.1663Z","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["d","M5.83333 15.1667C6.56971 15.1667 7.16667 14.5697 7.16667 13.8333C7.16667 13.097 6.56971 12.5 5.83333 12.5C5.09695 12.5 4.5 13.097 4.5 13.8333C4.5 14.5697 5.09695 15.1667 5.83333 15.1667Z","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["d","M11.1663 15.1667C11.9027 15.1667 12.4997 14.5697 12.4997 13.8333C12.4997 13.097 11.9027 12.5 11.1663 12.5C10.43 12.5 9.83301 13.097 9.83301 13.8333C9.83301 14.5697 10.43 15.1667 11.1663 15.1667Z","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["d","M15.1667 8.5V9.83333H13.1667C12.8 9.83333 12.5 9.53333 12.5 9.16667V7.16667C12.5 6.8 12.8 6.5 13.1667 6.5H14.0267L15.1667 8.5Z","stroke","#5A5C81","stroke-linecap","round","stroke-linejoin","round"],["routerLink","users","routerLinkActive","active",1,"item"],["routerLink","notifications","routerLinkActive","active",1,"item"],["d","M8.01339 1.94141C5.80673 1.94141 4.01339 3.73474 4.01339 5.94141V7.86807C4.01339 8.27474 3.84006 8.89474 3.63339 9.24141L2.86673 10.5147C2.39339 11.3014 2.72006 12.1747 3.58673 12.4681C6.46006 13.4281 9.56006 13.4281 12.4334 12.4681C13.2401 12.2014 13.5934 11.2481 13.1534 10.5147L12.3867 9.24141C12.1867 8.89474 12.0134 8.27474 12.0134 7.86807V5.94141C12.0134 3.74141 10.2134 1.94141 8.01339 1.94141Z","stroke","#020203","stroke-miterlimit","10","stroke-linecap","round"],["d","M9.24694 2.13297C9.04027 2.07297 8.82694 2.0263 8.60694 1.99964C7.96694 1.91964 7.35361 1.9663 6.78027 2.13297C6.97361 1.63964 7.45361 1.29297 8.01361 1.29297C8.57361 1.29297 9.05361 1.63964 9.24694 2.13297Z","stroke","#020203","stroke-miterlimit","10","stroke-linecap","round","stroke-linejoin","round"],["d","M10.0137 12.707C10.0137 13.807 9.11367 14.707 8.01367 14.707C7.46701 14.707 6.96034 14.4804 6.60034 14.1204C6.24034 13.7604 6.01367 13.2537 6.01367 12.707","stroke","#020203","stroke-miterlimit","10"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Settings"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"ul",4),t.YNc(6,f,7,0,"li",5),t.YNc(7,p,10,0,"li",6),t.YNc(8,c,10,0,"li",7),t.YNc(9,h,7,0,"li",8),t.YNc(10,M,8,0,"li",9),t.qZA()(),t.TgZ(11,"div",10),t._UZ(12,"router-outlet"),t.qZA()()()),2&o&&(t.xp6(6),t.Q6J("ngIf",!l.isAdmin),t.xp6(1),t.Q6J("ngIf",!l.isAdmin),t.xp6(1),t.Q6J("ngIf",!l.isAdmin),t.xp6(1),t.Q6J("ngIf",!l.isAdmin),t.xp6(1),t.Q6J("ngIf",!l.isAdmin),t.xp6(1),t.Q6J("ngClass",t.VKq(6,C,l.isDeliveryPage)))},dependencies:[e.mk,e.O5,a.lC,a.rH,a.Od],styles:[":root{--header-height: 180px}.settings__title{margin-bottom:24px;font-weight:500;font-size:24px;line-height:31.2px}.settings_wrap{display:grid;grid-template-columns:260px 1fr;grid-gap:40px}.settings_navigation,.settings_main{background:#FFF;box-shadow:0 2px 2px #e6e6e6;border-radius:6px}.settings_navigation{padding:16px 12px;height:-moz-fit-content;height:fit-content}.settings_navigation .list{flex-direction:column}.settings_navigation .list .item{padding:8px 16px;border-radius:6px;transition:.2s ease-out}.settings_navigation .list .item:not(:last-child){margin-bottom:12px}.settings_navigation .list .item__title{margin-left:8px;color:#a3a4bd;transition:.2s ease-out}.settings_navigation .list .item__icon path{stroke:#a3a4bd;transition:.2s ease-out}.settings_navigation .list .item_wrap{display:flex;align-items:center}.settings_navigation .list .item:hover{cursor:pointer;opacity:1}.settings_navigation .list .item:hover .item__title{color:#020203}.settings_navigation .list .item:hover .item__icon path{stroke:#020203}.settings_navigation .list .item.active{cursor:default;background-color:#f3f3f7}.settings_navigation .list .item.active .item__title{color:#020203}.settings_navigation .list .item.active .item__icon path{stroke:#020203}.settings_main{padding:24px;height:-moz-fit-content;height:fit-content;overflow-x:auto}.settings_main.users{padding-bottom:0}.settings_main.delivery{overflow-x:visible}.loader-wrap{position:relative;min-height:50vh}\n"],encapsulation:2}),n})();var _=i(4006),w=i(7795),L=i(9673),s=i(5412),Y=i(8112),S=i(2722),F=i(262),W=i(2843),K=i(2810),R=i(7188),J=i(9777),G=i(2312),Q=i(9878),P=i(42),I=i(6885),v=i(605);function u(n,d){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"form",2)(2,"div",3)(3,"h3",4),t._uU(4,"Personal information"),t.qZA(),t.TgZ(5,"div",5)(6,"div",6),t._UZ(7,"app-field",7),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"app-field",8),t.qZA(),t.TgZ(10,"div",6),t._UZ(11,"app-field",9),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"app-field",10),t.qZA()()(),t.TgZ(14,"div",11)(15,"h3",4),t._uU(16,"Security"),t.qZA(),t.TgZ(17,"div",5)(18,"div",6)(19,"app-field",12),t.NdJ("inputEvent",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.addNewPass())}),t.qZA()(),t.TgZ(20,"div",6),t._UZ(21,"app-field",13),t.qZA()()(),t.TgZ(22,"div",14)(23,"app-button",15),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.cancel())}),t.qZA(),t.TgZ(24,"app-button",16),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.submitForm())}),t.qZA()()(),t.BQk()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("control",o.form.controls.firstName)("label","Name")("type",o.FIELD_TYPES.Text)("placeholder","Name"),t.xp6(2),t.Q6J("control",o.form.controls.lastName)("label","Surname")("type",o.FIELD_TYPES.Text)("placeholder","Surname"),t.xp6(2),t.Q6J("control",o.form.controls.contactEmail)("label","Contact email")("type",o.FIELD_TYPES.Text)("placeholder","Contact e-mail"),t.xp6(2),t.Q6J("control",o.form.controls.additionalContactEmail)("label","Additional contact email")("type",o.FIELD_TYPES.Text)("placeholder","Additional contact email"),t.xp6(6),t.Q6J("control",o.form.controls.password)("label","New password")("type",o.FIELD_TYPES.Password)("placeholder","New password"),t.xp6(2),t.Q6J("control",o.form.controls.passwordConfirmation)("label","Repeat new password")("type",o.FIELD_TYPES.Password)("placeholder","Repeat new password"),t.xp6(2),t.Q6J("buttonConfig",o.buttonCancelConfig),t.xp6(1),t.Q6J("buttonConfig",o.buttonSubmitConfig)("isLoaded",o.isLoadedBtn)}}function U(n,d){1&n&&(t.TgZ(0,"div",17),t._UZ(1,"app-loader"),t.qZA())}let V=(()=>{class n{constructor(o,l,m,O,k){this.formBuilder=o,this.dialog=l,this.settingsService=m,this.destroy$=O,this.authService=k,this.FIELD_TYPES=w.U,this.isLoadedBtn=!0,this.buttonSubmitConfig={text:"Save",type:Y.L.Submit,viewType:L.F.Filled,minWidth:"174px"},this.buttonCancelConfig={text:"Cancel",type:Y.L.Button,viewType:L.F.LightBlue,minWidth:"174px"},this.changeContactEmailDialogConfig={icon:K.H.EMAIL,title:"Your contact email has been reset",message:"We have sent a link to reset the contact email to your email",informationButtonText:"Logout"},this.dialogSuccessConfig={title:"Success!",isSuccess:!0}}ngOnInit(){this.getData()}getData(){this.settingsService.getPersonalSettings().pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.personalInformation=o,this.initForm(this.personalInformation),this.isDataLoaded=!0})}initForm(o){this.form||(this.form=this.formBuilder.nonNullable.group({firstName:[o.firstName,[_.kI.required]],lastName:[o.lastName,[_.kI.required]],contactEmail:[o.contactEmail,[_.kI.required,_.kI.email]],additionalContactEmail:[o.additionalContactEmail,_.kI.email],password:["",[_.kI.minLength(8)]],passwordConfirmation:["",[_.kI.minLength(8)]]}),this.personalInitialValue=this.form.value)}submitForm(){this.form.invalid?this.form.markAllAsTouched():(this.isLoadedBtn=!1,this.form.get("password")?.value&&this.authService.resetPassword(this.form.value,!0).pipe((0,S.R)(this.destroy$),(0,F.K)(o=>((0,J.d)(this.form,o),this.isLoadedBtn=!0,(0,W._)(()=>new Error(o))))).subscribe(),this.settingsService.postPersonalSettings(this.form.value).pipe((0,S.R)(this.destroy$),(0,F.K)(o=>((0,J.d)(this.form,o),this.isLoadedBtn=!0,(0,W._)(()=>new Error(o))))).subscribe(()=>{this.isLoadedBtn=!0,this.form.controls.contactEmail.value===this.personalInformation.contactEmail?(this.getData(),this.openSuccessDialog(),this.authService.userData$.next(this.form.value),this.personalInitialValue=this.form.value):this.openChangeContactEmailDialog()}))}openChangeContactEmailDialog(){let o=new s.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:this.changeContactEmailDialogConfig},this.dialog.open(R.a,o).afterClosed().pipe((0,S.R)(this.destroy$)).subscribe(()=>this.authService.logout())}openSuccessDialog(){let o=new s.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogSuccessConfig},this.dialog.open(R.a,o)}cancel(){this.form.setValue({...this.personalInitialValue,password:"",passwordConfirmation:""}),this.form.markAsUntouched()}addNewPass(){const o=this.form.get("password")?.value;this.form.get("passwordConfirmation")?.setValidators([_.kI.minLength(8),o?_.kI.required:()=>null,(0,G.tc)(o,"The password confirmation does not match")]),this.form.controls.passwordConfirmation.updateValueAndValidity()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(_.qu),t.Y36(s.uw),t.Y36(Q.g),t.Y36(x.h),t.Y36(y.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-personal-information"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["autocomplete","off",1,"form",3,"formGroup"],[1,"block","info"],[1,"title"],[1,"fields"],[1,"field"],["formControlName","firstName",3,"control","label","type","placeholder"],["formControlName","lastName",3,"control","label","type","placeholder"],["formControlName","contactEmail",3,"control","label","type","placeholder"],["formControlName","additionalContactEmail",3,"control","label","type","placeholder"],[1,"block","security"],["formControlName","password",3,"control","label","type","placeholder","inputEvent"],["formControlName","passwordConfirmation",3,"control","label","type","placeholder"],[1,"submit"],[3,"buttonConfig","clickEvent"],[3,"buttonConfig","isLoaded","clickEvent"],[1,"loader-wrap"]],template:function(o,l){if(1&o&&(t.YNc(0,u,25,28,"ng-container",0),t.YNc(1,U,2,0,"ng-template",null,1,t.W1O)),2&o){const m=t.MAs(2);t.Q6J("ngIf",l.isDataLoaded)("ngIfElse",m)}},dependencies:[e.O5,P.r,I.C,_._Y,_.JJ,_.JL,_.sg,_.u,v.R],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.block[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:24px;font-weight:600;font-size:16px;line-height:24px}.block[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;column-gap:24px}.block[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:calc(50% - 12px);margin-bottom:32px}.block.info[_ngcontent-%COMP%]{margin-bottom:48px}.block.security[_ngcontent-%COMP%]{margin-bottom:16px}.submit[_ngcontent-%COMP%]{padding-top:46px;display:flex;justify-content:center;column-gap:16px}"]}),n})();var $=i(9463),T=(()=>{return(n=T||(T={})).Delivery="delivery",n.Pickup="pickup",T;var n})(),r=i(9356),E=i(3811),g=i(4198),B=i(9382);const H=function(n,d){return[n,d]};function z(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"form",4)(1,"div",5)(2,"div",6),t._UZ(3,"app-field",7),t.ALo(4,"titleCase"),t.ALo(5,"titleCase"),t.qZA(),t.TgZ(6,"div",6),t._UZ(7,"app-field",8),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6),t._UZ(10,"app-field",9),t.qZA(),t.TgZ(11,"div",6),t._UZ(12,"app-field",10),t.qZA()(),t.TgZ(13,"div",11)(14,"app-button",12),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw(2);return t.KtG(m.cancel())}),t.qZA(),t.TgZ(15,"app-button",13),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw(2);return t.KtG(m.submitForm())}),t.qZA()()()}if(2&n){const o=t.oxw(2);t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("control",o.form.controls.deliveryType)("label","Default delivery type")("type",o.FIELD_TYPES.Selector)("options",t.WLB(29,H,t.lcZ(4,25,o.DELIVERY_TYPE.Delivery),t.lcZ(5,27,o.DELIVERY_TYPE.Pickup)))("placeholder","Choose option"),t.xp6(4),t.Q6J("control",o.form.controls.addLogoToBox)("label","Adding the logo to the box")("type",o.FIELD_TYPES.Selector)("options",t.WLB(32,H,o.ANSWER_YES_NO.Yes,o.ANSWER_YES_NO.No))("placeholder","Choose option"),t.xp6(3),t.Q6J("control",o.form.controls.addressOptions)("label","Default address line")("type",o.FIELD_TYPES.Selector)("options",o.deliveryDetails.addressOptions)("isDisabled",o.isAddressOptionsDisabled)("placeholder","Choose option"),t.xp6(2),t.Q6J("control",o.form.controls.deliveryUsersOptions)("label","Default delivery user")("type",o.FIELD_TYPES.Selector)("options",o.deliveryDetails.deliveryUsersOptions)("placeholder","Choose option"),t.xp6(2),t.Q6J("buttonConfig",o.buttonCancelConfig),t.xp6(1),t.Q6J("buttonConfig",o.buttonSubmitConfig)("isLoaded",o.isLoadedBtn)}}function tt(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"h5",2),t._uU(2,"Delivery settings"),t.qZA(),t.YNc(3,z,16,35,"form",3),t.BQk()),2&n){const o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.deliveryDetails)}}function et(n,d){1&n&&(t.TgZ(0,"div",14),t._UZ(1,"app-loader"),t.qZA())}let ot=(()=>{class n{constructor(o,l,m,O){this.formBuilder=o,this.destroy$=l,this.settingsService=m,this.dialog=O,this.FIELD_TYPES=w.U,this.DELIVERY_TYPE=T,this.ANSWER_YES_NO=r.W,this.buttonSubmitConfig={text:"Save",viewType:L.F.Filled,minWidth:"174px"},this.buttonCancelConfig={text:"Cancel",type:Y.L.Button,viewType:L.F.LightBlue,minWidth:"174px"},this.dialogSuccessConfig={title:"Success!",isSuccess:!0},this.isLoadedBtn=!0,this.isAddressOptionsDisabled=!1}ngOnInit(){this.getData()}submitForm(){this.form.valid?(this.isLoadedBtn=!1,this.settingsService.postDeliverySettings(this.form.value).pipe((0,S.R)(this.destroy$),(0,F.K)(o=>(this.isLoadedBtn=!0,(0,J.d)(this.form,o),(0,W._)(()=>new Error(o))))).subscribe(()=>{this.deliveryDetailsInitialValue=this.form.value,this.isLoadedBtn=!0,this.openSuccessDialog()})):this.form.markAllAsTouched()}openSuccessDialog(){let o=new s.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogSuccessConfig},this.dialog.open(R.a,o)}cancel(){this.form.setValue(this.deliveryDetailsInitialValue),this.form.markAsUntouched()}getData(){this.settingsService.getDeliverySettings().pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.deliveryDetails={...o,deliveryUsersOptions:[{id:-1,label:"No delivery user"},...o.deliveryUsersOptions]},this.initForm(),this.isDataLoaded=!0})}initForm(){this.form=this.formBuilder.nonNullable.group({deliveryType:[(0,E.Q)(this.deliveryDetails.deliveryType)||"",[_.kI.required]],addLogoToBox:[(0,g.e)(this.deliveryDetails.addLogoToBox)||"",[_.kI.required]],addressOptions:[this.setAddressOption(this.deliveryDetails.defaultAddressId)],defaultAddressId:[this.deliveryDetails.defaultAddressId],deliveryUsersOptions:[this.setUsersAddressOption(this.deliveryDetails.defaultUsersAddressId)],defaultUsersAddressId:[this.deliveryDetails.defaultUsersAddressId]}),this.deliveryDetailsInitialValue=this.form.value,this.configureAddressOptionInput(this.deliveryDetails.deliveryType),this.subscribeForm()}subscribeForm(){this.form.get("addressOptions")?.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.form.get("defaultAddressId")?.setValue(o?.id||null)}),this.form.get("deliveryUsersOptions")?.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(o=>{const l=o?.id&&-1!==o?.id?o.id:null;this.form.get("defaultUsersAddressId")?.setValue(l),-1===o?.id&&this.form.get("deliveryUsersOptions")?.reset(null)}),this.form.get("deliveryType")?.valueChanges.pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.deliveryDetailsInitialValue.deliveryType!==o&&(this.form.get("defaultAddressId")?.setValue(null),this.form.get("addressOptions")?.reset(null)),this.configureAddressOptionInput(o)})}setAddressOption(o){return this.deliveryDetails.addressOptions.find(m=>m.id===o)||null}setUsersAddressOption(o){return this.deliveryDetails.deliveryUsersOptions.find(m=>m?.id===o)||null}configureAddressOptionInput(o){this.isAddressOptionsDisabled=String(o).toLowerCase()===String(this.DELIVERY_TYPE.Pickup).toLowerCase()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(_.qu),t.Y36(x.h),t.Y36(Q.g),t.Y36(s.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delivery-settings"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"title"],["class","form","autocomplete","off",3,"formGroup",4,"ngIf"],["autocomplete","off",1,"form",3,"formGroup"],[1,"fields"],[1,"field"],["formControlName","deliveryType",3,"control","label","type","options","placeholder"],["formControlName","addLogoToBox",3,"control","label","type","options","placeholder"],["formControlName","addressOptions",3,"control","label","type","options","isDisabled","placeholder"],["formControlName","deliveryUsersOptions",3,"control","label","type","options","placeholder"],[1,"submit"],[3,"buttonConfig","clickEvent"],[3,"buttonConfig","isLoaded","clickEvent"],[1,"loader-wrap"]],template:function(o,l){if(1&o&&(t.YNc(0,tt,4,1,"ng-container",0),t.YNc(1,et,2,0,"ng-template",null,1,t.W1O)),2&o){const m=t.MAs(2);t.Q6J("ngIf",l.isDataLoaded)("ngIfElse",m)}},dependencies:[e.O5,P.r,I.C,_._Y,_.JJ,_.JL,_.sg,_.u,v.R,B.r],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.title[_ngcontent-%COMP%]{margin-bottom:24px;font-weight:600;font-size:16px;line-height:24px}.field[_ngcontent-%COMP%]{margin-bottom:24px}.fields[_ngcontent-%COMP%]{display:flex;column-gap:32px}.fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{flex-grow:1}.submit[_ngcontent-%COMP%]{padding-top:24px;display:flex;justify-content:center;column-gap:16px}"]}),n})();var nt=i(338),q=i(9418),it=i(3184),st=i(2686),rt=i(9576),N=i(7155),j=i(6308),X=i(1581);function at(n,d){1&n&&(t.TgZ(0,"div",25),t._uU(1," Select users who will receive email notifications from the platform "),t.qZA())}function lt(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"app-button",26),t.NdJ("click",function(){t.CHM(o);const m=t.oxw(2);return t.KtG(m.updateUser())}),t.qZA()}if(2&n){const o=t.oxw(2);t.Q6J("buttonConfig",o.addUserButtonConfig)}}function ct(n,d){1&n&&t._UZ(0,"th",27)}function dt(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"td",28)(1,"app-field",29),t.NdJ("inputEvent",function(){const O=t.CHM(o).$implicit,k=t.oxw(2);return t.KtG(k.changeGlobalNotificationsReceiver(O.id,O.isGlobalNotificationsReceiver))}),t.qZA()()}if(2&n){const o=d.$implicit,l=t.oxw(2);t.xp6(1),t.Q6J("label","")("type",l.FIELD_TYPES.Checkbox)("setInputValue",o.isGlobalNotificationsReceiver)("tooltipText",o.isGlobalNotificationsReceiver?"This user is set as the receiver of the automatic emails from the platform":"This user is not set as the receiver of the automatic emails from the platform")}}function pt(n,d){1&n&&(t.TgZ(0,"th",30),t._uU(1," Contact "),t.qZA())}function mt(n,d){if(1&n&&(t.TgZ(0,"td",31)(1,"div",32)(2,"div",33),t._uU(3),t.qZA(),t.TgZ(4,"div",34)(5,"div",35),t._uU(6),t.qZA(),t.TgZ(7,"div",36),t._uU(8),t.qZA()()()()),2&n){const o=d.$implicit,l=t.oxw(2);t.xp6(3),t.hij(" ",l.getFirstLetter(o.contact)," "),t.xp6(3),t.Oqu(o.contact),t.xp6(2),t.Oqu(o.email)}}function _t(n,d){1&n&&(t.TgZ(0,"th",37),t._uU(1," Type of user "),t.qZA())}function ut(n,d){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){const o=d.$implicit;t.xp6(1),t.Oqu(o.typeUser)}}function gt(n,d){1&n&&(t.TgZ(0,"th",39),t._uU(1," Created on "),t.qZA())}function ft(n,d){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const o=d.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.createdOn,"dd/MM/YY")," ")}}function ht(n,d){1&n&&t._UZ(0,"th",27)}function Ct(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"td",38)(1,"div",40)(2,"button",41),t.NdJ("click",function(){const O=t.CHM(o).$implicit,k=t.oxw(2);return t.KtG(k.updateUser(O.id))}),t._UZ(3,"img",42),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){const O=t.CHM(o).$implicit,k=t.oxw(2);return t.KtG(k.delete(O.id))}),t._UZ(5,"img",44),t.qZA()()()}}function vt(n,d){1&n&&t._UZ(0,"tr",45)}const Et=function(n){return{selected:n}};function yt(n,d){1&n&&t._UZ(0,"tr",46),2&n&&t.Q6J("ngClass",t.VKq(1,Et,d.$implicit.isGlobalNotificationsReceiver))}const Tt=function(){return[5,10,20]};function xt(n,d){if(1&n){const o=t.EpF();t.TgZ(0,"mat-paginator",47),t.NdJ("page",function(m){t.CHM(o);const O=t.oxw(2);return t.KtG(O.onChangePage(m))}),t.qZA()}if(2&n){const o=t.oxw(2);t.Q6J("length",o.totalItems)("pageSizeOptions",t.DdM(3,Tt))("pageSize",o.params.perPage)}}const Dt=function(n,d){return{pagination:n,"with-icon":d}};function Ot(n,d){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"h5",4),t._uU(4,"Users"),t.qZA(),t.YNc(5,at,2,0,"div",5),t.qZA(),t.TgZ(6,"div",6),t.YNc(7,lt,1,1,"app-button",7),t.qZA()(),t.TgZ(8,"div",8)(9,"table",9),t.NdJ("matSortChange",function(m){t.CHM(o);const O=t.oxw();return t.KtG(O.sortData(m))}),t.ynx(10,10),t.YNc(11,ct,1,0,"th",11),t.YNc(12,dt,2,4,"td",12),t.BQk(),t.ynx(13,13),t.YNc(14,pt,2,0,"th",14),t.YNc(15,mt,9,3,"td",15),t.BQk(),t.ynx(16,16),t.YNc(17,_t,2,0,"th",17),t.YNc(18,ut,2,1,"td",18),t.BQk(),t.ynx(19,19),t.YNc(20,gt,2,0,"th",20),t.YNc(21,ft,3,4,"td",18),t.BQk(),t.ynx(22,21),t.YNc(23,ht,1,0,"th",11),t.YNc(24,Ct,6,0,"td",18),t.BQk(),t.YNc(25,vt,1,0,"tr",22),t.YNc(26,yt,1,3,"tr",23),t.qZA(),t.YNc(27,xt,1,4,"mat-paginator",24),t.qZA(),t.BQk()}if(2&n){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",!o.isEmployee),t.xp6(2),t.Q6J("ngIf",!o.isEmployee),t.xp6(1),t.Q6J("ngClass",t.WLB(9,Dt,o.totalItems>o.params.perPage,o.isEmployee)),t.xp6(1),t.ekj("block-disabled",!o.isLoaded),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",o.totalItems>o.params.perPage)}}function St(n,d){1&n&&(t.TgZ(0,"div",48),t._UZ(1,"app-loader"),t.qZA())}function bt(n,d){if(1&n&&(t.ynx(0)(1,14),t._UZ(2,"app-field",15),t.BQk()()),2&n){const o=d.$implicit,l=d.index,m=t.oxw(4);let O;t.xp6(1),t.Q6J("formGroupName",l),t.xp6(1),t.Q6J("label",null==(O=o.get("title"))?null:O.value)("labelColor","#111729")("type",m.FIELD_TYPES.Checkbox)}}function Mt(n,d){if(1&n&&(t.ynx(0,12),t.YNc(1,bt,3,4,"ng-container",13),t.BQk()),2&n){const o=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",o.settings.controls)}}function It(n,d){if(1&n&&(t.TgZ(0,"form",10),t.YNc(1,Mt,2,1,"ng-container",11),t.qZA()),2&n){const o=t.oxw(2);t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("ngIf",o.settings.controls)}}function At(n,d){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"h5",3),t._uU(3,"Notifications"),t.qZA(),t.TgZ(4,"div",4),t._uU(5,"Notify me when:"),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,It,2,2,"form",6),t.qZA(),t.TgZ(8,"div",7)(9,"app-button",8),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.cancel())}),t.qZA(),t.TgZ(10,"app-button",9),t.NdJ("clickEvent",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.submitForm())}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw();t.xp6(7),t.Q6J("ngIf",o.form),t.xp6(2),t.Q6J("buttonConfig",o.buttonCancelConfig),t.xp6(1),t.Q6J("buttonConfig",o.buttonSubmitConfig)("isLoaded",o.isLoadedBtn)}}function Lt(n,d){1&n&&(t.TgZ(0,"div",16),t._UZ(1,"app-loader"),t.qZA())}const Zt=[{path:"",component:b,children:[{path:"",redirectTo:"personal-information",pathMatch:"full"},{path:"personal-information",component:V},{path:"company-details",component:$.s},{path:"delivery-settings",component:ot},{path:"users",component:(()=>{class n extends it.O{constructor(o,l,m,O,k,Rt,Bt,kt){super(o,l,m,O,k),this.usersService=Rt,this.dialog=Bt,this.authorizationService=kt,this.FIELD_TYPES=w.U,this.addUserButtonConfig={text:"Add new users",viewType:L.F.LightBlue,padding:"21px 26px 21px 23px",icon:"plus-2.svg"},this.displayedColumns=[],this.isEmployee=this.authorizationService.isEmployee,this.displayedColumns=this.isEmployee?["contact","typeUser","createdOn"]:["receiver","contact","typeUser","createdOn","actions"]}updateUser(o){o?this.usersService.getUser(Number(o)).pipe((0,S.R)(this.destroy$)).subscribe(l=>{this.openDialog(l)}):this.openDialog()}delete(o){let l=new s.vA;l={...l,disableClose:!0,width:"100%",maxWidth:"558px",data:{title:"Are you sure?",message:"Are you sure you want to delete this user?",declineButtonText:"Cancel",acceptButtonText:"Delete user"}},this.dialog.open(R.a,l).afterClosed().pipe((0,S.R)(this.destroy$)).subscribe(O=>{O===q.u.Accept&&this.usersService.deleteUser(o).pipe((0,S.R)(this.destroy$)).subscribe(()=>this.getData())})}getData(){this.usersService.getUsers((0,st.f)(this.params)).pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.setData(o),this.isLoaded=!0})}openDialog(o){let l=new s.vA;l={...l,width:"100%",maxWidth:"700px",maxHeight:"90vh",data:{userData:o}},this.dialog.open(nt.i,l).afterClosed().pipe((0,S.R)(this.destroy$)).subscribe(m=>{m&&m!==q.u.Close&&this.getData()})}changeGlobalNotificationsReceiver(o,l){this.isLoaded=!1,this.usersService.changeGlobalNotificationsReceiver(o,!l).pipe((0,S.R)(this.destroy$)).subscribe(()=>this.getData())}getFirstLetter(o){return o.slice(0,1).toUpperCase()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(x.h),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(rt.f),t.Y36(s.uw),t.Y36(y.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-users"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"header"],[1,"header_info"],[1,"header__title"],["class","header__text",4,"ngIf"],[1,"header_btn"],[3,"buttonConfig","click",4,"ngIf"],[1,"body",3,"ngClass"],["mat-table","","matSort","",1,"table",3,"dataSource","matSortChange"],["matColumnDef","receiver"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","contact"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["class","contact","mat-cell","",4,"matCellDef"],["matColumnDef","typeUser"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type of user",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdOn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by date",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],[3,"length","pageSizeOptions","pageSize","page",4,"ngIf"],[1,"header__text"],[3,"buttonConfig","click"],["mat-header-cell",""],["mat-cell","",1,"checkbox"],[3,"label","type","setInputValue","tooltipText","inputEvent"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["mat-cell","",1,"contact"],[1,"contact_wrap"],[1,"contact__avatar"],[1,"contact_info"],[1,"contact__name"],[1,"contact__email"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type of user"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by date"],[1,"actions"],[1,"btn","circle","circle-blue",3,"click"],["src","./assets/images/icons/edit.svg","alt","Edit"],[1,"btn","circle","circle-red",3,"click"],["src","./assets/images/icons/trash-red.svg","alt","Delete"],["mat-header-row",""],["mat-row","",3,"ngClass"],[3,"length","pageSizeOptions","pageSize","page"],[1,"loader-wrap"]],template:function(o,l){if(1&o&&(t.YNc(0,Ot,28,12,"ng-container",0),t.YNc(1,St,2,0,"ng-template",null,1,t.W1O)),2&o){const m=t.MAs(2);t.Q6J("ngIf",l.isDataLoaded)("ngIfElse",m)}},dependencies:[e.mk,e.O5,P.r,I.C,v.R,N.BZ,N.fO,N.as,N.w1,N.Dz,N.nj,N.ge,N.ev,N.XQ,N.Gk,j.YE,j.nU,X.NW,e.uU],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header__title[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:600;font-size:16px;line-height:24px}.header__text[_ngcontent-%COMP%]{margin-bottom:24px;line-height:21px;color:#5a5c81}.body.pagination[_ngcontent-%COMP%]{padding-bottom:0}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{padding:24px 0 0;box-shadow:none}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:after{width:100%}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:after{width:100%}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:default;background-color:#fff}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-row.selected[_ngcontent-%COMP%]:hover{background-color:#eef6ff}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding:0 5px;width:40px}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:13px 15px 13px 19px}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-cell.checkbox[_ngcontent-%COMP%]{padding:0 0 13px 15px}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;margin-right:26px;cursor:pointer}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;column-gap:8px;padding-right:8px}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .contact_wrap[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:7.5px}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .contact__avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background-color:#eef6ff;border-radius:50%;border:1px solid #D7E9FC;color:#1b459b;font-size:18px;font-weight:300}.body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .contact__name[_ngcontent-%COMP%]{margin-bottom:4px;font-size:16px;color:#020203}.body.with-icon[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-of-type{width:auto}"]}),n})()},{path:"notifications",component:(()=>{class n{constructor(o,l,m,O){this.formBuilder=o,this.settingsService=l,this.dialog=m,this.destroy$=O,this.FIELD_TYPES=w.U,this.isLoadedBtn=!0,this.buttonSubmitConfig={text:"Save",type:Y.L.Submit,viewType:L.F.Filled,minWidth:"174px"},this.buttonCancelConfig={text:"Cancel",type:Y.L.Button,viewType:L.F.LightBlue,minWidth:"174px"},this.dialogSuccessConfig={title:"Success!",isSuccess:!0}}get settings(){return this.form.controls.settings}ngOnInit(){this.getData()}getData(){this.settingsService.getNotificationsSettings().pipe((0,S.R)(this.destroy$)).subscribe(o=>{this.fields=o,this.initForm(),this.patchForm(),this.notificationsDetailsInitialValue=this.form.value,this.isDataLoaded=!0})}initForm(){this.form=this.formBuilder.group({settings:this.formBuilder.array([])})}patchForm(){const o=this.form.get("settings");this.fields.forEach(l=>{o.push(this.formBuilder.group(l))})}submitForm(){this.isLoadedBtn=!1,this.settingsService.postNotificationsSettings(this.form.value).pipe((0,S.R)(this.destroy$),(0,F.K)(o=>{throw this.isLoadedBtn=!0,(0,J.d)(this.form,o),o})).subscribe(()=>{this.notificationsDetailsInitialValue=this.form.value,this.isLoadedBtn=!0,this.openSuccessDialog()})}openSuccessDialog(){let o=new s.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogSuccessConfig},this.dialog.open(R.a,o)}cancel(){this.form.setValue(this.notificationsDetailsInitialValue)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(_.qu),t.Y36(Q.g),t.Y36(s.uw),t.Y36(x.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notifications"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"header"],[1,"header__title"],[1,"header__text"],[1,"body"],["class","form","autocomplete","off",3,"formGroup",4,"ngIf"],[1,"footer"],[3,"buttonConfig","clickEvent"],[3,"buttonConfig","isLoaded","clickEvent"],["autocomplete","off",1,"form",3,"formGroup"],["formArrayName","settings",4,"ngIf"],["formArrayName","settings"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","enabled",3,"label","labelColor","type"],[1,"loader-wrap"]],template:function(o,l){if(1&o&&(t.YNc(0,At,11,4,"ng-container",0),t.YNc(1,Lt,2,0,"ng-template",null,1,t.W1O)),2&o){const m=t.MAs(2);t.Q6J("ngIf",l.isDataLoaded)("ngIfElse",m)}},dependencies:[e.sg,e.O5,P.r,I.C,_._Y,_.JJ,_.JL,_.sg,_.u,_.x0,_.CE,v.R],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.header__title[_ngcontent-%COMP%]{margin-bottom:4px;font-weight:600;font-size:16px;line-height:24px}.header__text[_ngcontent-%COMP%]{margin-bottom:24px;line-height:21px;color:#5a5c81}.body[_ngcontent-%COMP%]{margin-bottom:24px}.body[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:28px}.body[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]  app-field .checkbox .checkbox-label{font-size:14px}.footer[_ngcontent-%COMP%]{display:flex;justify-content:center;column-gap:16px}"]}),n})()}]}];let Nt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Bz.forChild(Zt),a.Bz]}),n})();var wt=i(4466);let Yt=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[e.ez,Nt,wt.m,N.p0,j.JX,X.TU]}),n})()},338:(A,D,i)=>{i.d(D,{i:()=>Q});var e=i(7795),a=i(4006),x=i(9673),t=i(5412),y=i(8112),f=i(221),p=i(9249),c=i(2722),h=i(262),M=i(2843),C=i(2893),b=i(9418),_=i(6457),w=i(9777),L=i(2312),s=i(1571),Y=i(9878),S=i(9576),F=i(6895),W=i(42),K=i(6885);function R(P,I){if(1&P&&(s.TgZ(0,"div",4),s._UZ(1,"app-field",17),s.qZA()),2&P){const v=s.oxw();s.xp6(1),s.Q6J("control",v.form.controls.password)("label",v.isEdit?"Update password":"Create password")("type",v.FIELD_TYPES.Password)}}function J(P,I){if(1&P){const v=s.EpF();s.TgZ(0,"div",4)(1,"app-field",18),s.NdJ("inputEvent",function(){s.CHM(v);const U=s.oxw();return s.KtG(U.addNewPass())}),s.qZA()()}if(2&P){const v=s.oxw();s.xp6(1),s.Q6J("control",v.form.controls.passwordConfirmation)("label","Confirm password")("type",v.FIELD_TYPES.Password)}}function G(P,I){if(1&P){const v=s.EpF();s.TgZ(0,"app-button",15),s.NdJ("clickEvent",function(){s.CHM(v);const U=s.oxw();return s.KtG(U.changePassword())}),s.qZA()}if(2&P){const v=s.oxw();s.Q6J("buttonConfig",v.buttonPasswordConfig)}}let Q=(()=>{class P{constructor(v,u,U,V,$,T){this.formBuilder=v,this.dialogRef=u,this.settingsService=U,this.userService=V,this.data=$,this.destroy$=T,this.phoneMask=f.gP,this.typeOfUser=Object.values(p.x).splice(1),this.FIELD_TYPES=e.U,this.isLoadedBtn=!0,this.buttonPasswordConfig={text:"Change password",type:y.L.Button,viewType:x.F.Link},this.buttonCancelConfig={text:"Cancel",type:y.L.Button,viewType:x.F.LightBlue,padding:"0px",minWidth:"174px"},this.buttonSubmitConfig={text:"Save",type:y.L.Submit,viewType:x.F.Filled,padding:"0px",minWidth:"174px"}}ngOnInit(){this.userData=this.data?.userData,this.isEdit=!!this.userData,this.initForm()}initForm(){this.form=this.formBuilder.nonNullable.group(this.isEdit?this.isChangePassword?{firstName:[this.userData?.firstName,[a.kI.required]],lastName:[this.userData?.lastName,[a.kI.required]],phone:[this.userData?.phone,[a.kI.required]],email:[this.userData?.email,[a.kI.required,a.kI.email]],secondaryEmail:[this.userData?.secondaryEmail,[a.kI.email]],typeUser:[this.userData?.typeUser,[a.kI.required]],password:["",[a.kI.required,a.kI.minLength(8)]],passwordConfirmation:["",[a.kI.required,a.kI.minLength(8)]]}:{firstName:[this.userData?.firstName,[a.kI.required]],lastName:[this.userData?.lastName,[a.kI.required]],phone:[this.userData?.phone,[a.kI.required]],email:[this.userData?.email,[a.kI.required,a.kI.email]],secondaryEmail:[this.userData?.secondaryEmail,[a.kI.email]],typeUser:[this.userData?.typeUser,[a.kI.required]]}:{firstName:["",[a.kI.required]],lastName:["",[a.kI.required]],phone:["",[a.kI.required]],email:["",[a.kI.required,a.kI.email]],secondaryEmail:["",[a.kI.email]],typeUser:["",[a.kI.required]],password:["",[a.kI.required,a.kI.minLength(8)]]})}submitForm(){if(this.form.markAllAsTouched(),this.form.invalid)return;this.isLoadedBtn=!1;const v=this.isEdit?{...this.form.value,id:this.userData?.id}:this.form.value;this.data?.isCustomersPage?this.settingsService.saveEmployee((0,_.hl)(v),this.data?.isCustomersPage).pipe((0,c.R)(this.destroy$),(0,h.K)(u=>(this.isLoadedBtn=!0,(0,w.d)(this.form,u),(0,M._)(()=>new Error(u))))).subscribe(()=>{this.isLoadedBtn=!0,this.dialogRef.close(b.u.Accept)}):this.userService.saveUser(v,this.isEdit).pipe((0,c.R)(this.destroy$),(0,h.K)(u=>(this.isLoadedBtn=!0,(0,w.d)(this.form,u),(0,M._)(()=>new Error(u))))).subscribe(()=>{this.isLoadedBtn=!0,this.dialogRef.close(b.u.Accept)})}changePassword(){this.isChangePassword=!0,this.initForm()}addNewPass(){const v=this.form.get("password")?.value;this.form.get("passwordConfirmation")?.setValidators([a.kI.minLength(8),v?a.kI.required:()=>null,(0,L.tc)(v,"The password confirmation does not match")]),this.form.controls.passwordConfirmation.updateValueAndValidity()}cancel(){this.dialogRef.close(b.u.Close)}}return P.\u0275fac=function(v){return new(v||P)(s.Y36(a.qu),s.Y36(t.so),s.Y36(Y.g),s.Y36(S.f),s.Y36(t.WI),s.Y36(C.h))},P.\u0275cmp=s.Xpm({type:P,selectors:[["app-user-dialog"]],features:[s._Bn([C.h])],decls:24,vars:34,consts:[[1,"wrapper"],[1,"title"],["autocomplete","off",1,"form",3,"formGroup"],[1,"body"],[1,"field"],["formControlName","firstName",3,"control","label","labelColor","type"],["formControlName","lastName",3,"control","label","labelColor","type"],["formControlName","phone",3,"control","label","labelColor","type","mask"],["formControlName","email",3,"control","label","labelColor","type"],["formControlName","secondaryEmail",3,"control","label","labelColor","type"],["formControlName","typeUser",3,"control","label","labelColor","type","options"],["class","field",4,"ngIf"],[1,"change-pass-btn"],[3,"buttonConfig","clickEvent",4,"ngIf"],[1,"actions"],[3,"buttonConfig","clickEvent"],[3,"isLoaded","buttonConfig","clickEvent"],["formControlName","password",3,"control","label","type"],["formControlName","passwordConfirmation",3,"control","label","type","inputEvent"]],template:function(v,u){1&v&&(s.TgZ(0,"div",0)(1,"h3",1),s._uU(2),s.qZA(),s.TgZ(3,"form",2)(4,"div",3)(5,"div",4),s._UZ(6,"app-field",5),s.qZA(),s.TgZ(7,"div",4),s._UZ(8,"app-field",6),s.qZA(),s.TgZ(9,"div",4),s._UZ(10,"app-field",7),s.qZA(),s.TgZ(11,"div",4),s._UZ(12,"app-field",8),s.qZA(),s.TgZ(13,"div",4),s._UZ(14,"app-field",9),s.qZA(),s.TgZ(15,"div",4),s._UZ(16,"app-field",10),s.qZA(),s.YNc(17,R,2,3,"div",11),s.YNc(18,J,2,3,"div",11),s.TgZ(19,"div",12),s.YNc(20,G,1,1,"app-button",13),s.qZA()(),s.TgZ(21,"div",14)(22,"app-button",15),s.NdJ("clickEvent",function(){return u.cancel()}),s.qZA(),s.TgZ(23,"app-button",16),s.NdJ("clickEvent",function(){return u.submitForm()}),s.qZA()()()()),2&v&&(s.xp6(2),s.Oqu(u.isEdit?"Edit user":"Add user"),s.xp6(1),s.Q6J("formGroup",u.form),s.xp6(3),s.Q6J("control",u.form.controls.firstName)("label","First name")("labelColor","#111729")("type",u.FIELD_TYPES.Text),s.xp6(2),s.Q6J("control",u.form.controls.lastName)("label","Last name")("labelColor","#111729")("type",u.FIELD_TYPES.Text),s.xp6(2),s.Q6J("control",u.form.controls.phone)("label","Mobile phone")("labelColor","#111729")("type",u.FIELD_TYPES.Text)("mask",u.phoneMask),s.xp6(2),s.Q6J("control",u.form.controls.email)("label","E-mail")("labelColor","#111729")("type",u.FIELD_TYPES.Email),s.xp6(2),s.Q6J("control",u.form.controls.secondaryEmail)("label","Secondary Email")("labelColor","#111729")("type",u.FIELD_TYPES.Email),s.xp6(2),s.Q6J("control",u.form.controls.typeUser)("label","Type of user")("labelColor","#111729")("type",u.FIELD_TYPES.Selector)("options",u.typeOfUser),s.xp6(1),s.Q6J("ngIf",!u.isEdit||u.isEdit&&u.isChangePassword),s.xp6(1),s.Q6J("ngIf",u.isChangePassword),s.xp6(2),s.Q6J("ngIf",u.isEdit&&!u.isChangePassword),s.xp6(2),s.Q6J("buttonConfig",u.buttonCancelConfig),s.xp6(1),s.Q6J("isLoaded",u.isLoadedBtn)("buttonConfig",u.buttonSubmitConfig))},dependencies:[F.O5,W.r,K.C,a._Y,a.JJ,a.JL,a.sg,a.u],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.wrapper[_ngcontent-%COMP%]{padding:32px 104px}.wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:40px;font-weight:600;font-size:24px;line-height:120%;color:#111729;text-align:center}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-bottom:16px}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{align-self:center}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .change-pass-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:24px}.wrapper[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;column-gap:8px;row-gap:8px;padding-top:24px}"]}),P})()},4198:(A,D,i)=>{i.d(D,{O:()=>x,e:()=>a});var e=i(9356);function a(t){return t?e.W.Yes:e.W.No}function x(t){return t===e.W.Yes}},2312:(A,D,i)=>{i.d(D,{Gp:()=>x,TY:()=>a,WR:()=>t,tc:()=>y});var e=i(221);function a(f,p,c=!0){return h=>+(0,e.J1)(h.value,c)>f?{maxValueValidator:{max:f},errorText:p}:null}function x(f,p,c=!0){return h=>+(0,e.J1)(h.value,c)<f?{minValueValidator:{min:f},errorText:p}:null}function t(f){const{value:c}=f;return!/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(c)&&c&&c.length?{errorText:"Incorrect url"}:null}function y(f,p){return c=>c.value!==f?{errorText:p}:null}},9777:(A,D,i)=>{i.d(D,{d:()=>a});var e=i(5212);const a=(x,t)=>{const{errors:y}=t.error;for(const f in y)if(f in y){const p=x.get((0,e.fZ)(f));p&&(p.setErrors({errorText:y[f]}),p.markAsTouched())}}}}]);