"use strict";(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[562],{1060:(P,f,o)=>{o.d(f,{M:()=>D});var e=o(1571),_=o(2722),g=o(8033),u=o(2893),m=o(6895),C=o(9380),w=o(3162);function x(l,c){if(1&l&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA()),2&l){const r=e.oxw(2);e.xp6(1),e.Q6J("src",r.previewUrl,e.LSH)}}function O(l,c){if(1&l&&(e.TgZ(0,"div",7),e._UZ(1,"mat-progress-bar",8),e.TgZ(2,"span",9),e._uU(3),e.qZA()()),2&l){const r=e.oxw(2);e.xp6(1),e.Q6J("value",r.progress),e.xp6(2),e.hij("Loaded ",r.progress,"%")}}function M(l,c){if(1&l&&(e.TgZ(0,"div",2),e.YNc(1,x,2,1,"div",3),e.YNc(2,O,4,2,"ng-template",null,4,e.W1O),e.qZA()),2&l){const r=e.MAs(3),s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.previewUrl)("ngIfElse",r)}}let D=(()=>{class l{constructor(r,s){this.uploadService=r,this.destroy$=s,this.isLoading=!0,this.progress=0,this.src="",this.rotate=0,this.previewUrl="",this.isReady=new e.vpe}ngOnInit(){this.uploadService.uploadProgress.pipe((0,_.R)(this.destroy$)).subscribe(r=>{this.isLoading=!0,r.sort((s,h)=>s.progress<h.progress?1:-1).forEach(s=>{this.progress=s.progress}),r.every(s=>100===s.progress)&&(this.isLoading=!1)})}onProgress(r){this.progress=Math.round(100*r.loaded/r.total)}isLoaded(){this.isLoading=!1,this.isReady.emit(!0)}}return l.\u0275fac=function(r){return new(r||l)(e.Y36(g.C),e.Y36(u.h))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-artwork-img"]],inputs:{src:"src",rotate:"rotate",previewUrl:"previewUrl"},outputs:{isReady:"isReady"},decls:2,vars:11,consts:[[2,"width","100%","height","100%","overflow","hidden","pointer-events","none",3,"src","original-size","show-all","zoom","zoom-scale","render-text","show-borders","rotation","on-progress","page-rendered"],["class","loading-block",4,"ngIf"],[1,"loading-block"],["class","loading-block__wrap preview",4,"ngIf","ngIfElse"],["progressBlock",""],[1,"loading-block__wrap","preview"],["alt","pdf",3,"src"],[1,"loading-block__wrap","progress"],["mode","determinate",3,"value"],[1,"label"]],template:function(r,s){1&r&&(e.TgZ(0,"pdf-viewer",0),e.NdJ("on-progress",function(v){return s.onProgress(v)})("page-rendered",function(){return s.isLoaded()}),e.qZA(),e.YNc(1,M,4,2,"div",1)),2&r&&(e.Tol("artwork-img"),e.Q6J("src",s.src)("original-size",!1)("show-all",!1)("zoom",1)("zoom-scale","page-fit")("render-text",!1)("show-borders",!1)("rotation",s.rotate),e.xp6(1),e.Q6J("ngIf",s.isLoading))},dependencies:[m.O5,C.rQ,w.pW],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}  .artwork-img .ng2-pdf-viewer-container{overflow:hidden!important;display:flex;justify-content:center;align-items:center}  .artwork-img .ng2-pdf-viewer-container .page{margin:0 auto!important}  .mat-progress-bar{height:10px!important;border:.5px solid #7D94D8;border-radius:4px}  .mat-progress-bar-buffer{background-color:#eef6ff!important}  .mat-progress-bar-fill:after{background-color:#7d94d8!important}.loading-block[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;height:100%;border-radius:3px;overflow:hidden}.loading-block__wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:inherit;height:inherit}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.progress[_ngcontent-%COMP%]{padding:25px;background:#F6F9FF}.progress[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;line-height:140%;color:#7d94d8}"]}),l})()},827:(P,f,o)=>{o.d(f,{o:()=>k});var e=o(1571),_=o(2722),g=o(2893),u=o(8033),m=o(6895);let C=(()=>{class i{constructor(){this.fileDropped=new e.vpe}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1}ondrop(t){t.preventDefault(),t.stopPropagation(),this.fileOver=!1;let n=t.dataTransfer?.files;n&&n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","appDnd",""]],hostVars:2,hostBindings:function(t,n){1&t&&e.NdJ("dragover",function(p){return n.onDragOver(p)})("dragleave",function(p){return n.onDragLeave(p)})("drop",function(p){return n.ondrop(p)}),2&t&&e.ekj("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();var w=o(1060),x=o(2914);const O=["fileDropRef"];function M(i,a){1&i&&(e.TgZ(0,"div",10),e._uU(1,"PDF Files Only"),e.qZA())}function D(i,a){if(1&i&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.error)}}const l=function(i){return{small:i}};function c(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"app-artwork-img",16),e.NdJ("isReady",function(d){e.CHM(t);const p=e.oxw(2);return e.KtG(p.isReady(d))}),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,l,t.isSmallContainer)),e.xp6(1),e.Q6J("src",t.url||t.file.url)("previewUrl",t.file.previewUrl||"")("rotate",t.rotate)}}function r(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"app-pdf-block",18),e.NdJ("deleteFileEvent",function(){e.CHM(t);const d=e.oxw(2);return e.KtG(d.onDeleteFile())}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("file",t.file)("isReloadBtn",!0)("isDeleteBtn",!0)}}function s(i,a){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,c,2,6,"div",13),e.YNc(2,r,2,3,"ng-template",null,14,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isAsImage)("ngIfElse",t)}}const h=function(i,a){return{hidden:i,"mark-required":a}};let k=(()=>{class i{constructor(t,n,d){this.uploadService=t,this.destroy$=n,this.elementRef=d,this.text="Upload artwork",this.isShowRequirement=!0,this.rotate=0,this.loadedFileEvent=new e.vpe,this.deleteFileEvent=new e.vpe}ngOnInit(){this.elementRef.nativeElement.offsetWidth<400&&(this.isSmallContainer=!0),this.file&&!this.file.id&&this.readFile(),this.subscribeToReload()}subscribeToReload(){this.uploadService.reloadEvent$.pipe((0,_.R)(this.destroy$)).subscribe(t=>{t&&this.reloadFile()})}onFileDropped(t){this.prepareFilesList(t)}fileBrowseHandler(t){const{files:n}=t.target;this.prepareFilesList(n)}prepareFilesList(t){if(t){if(this.checkFile(t[0]),this.error)return this.file=null,void this.loadedFileEvent.emit(this.file);this.file=t[0],this.file=new File([this.file],this.replaceForbidden(this.file.name),{type:this.file.type}),this.fileDropEl.nativeElement.value="",this.isAsImage&&this.readFile(),this.loadedFileEvent.emit(this.file)}}readFile(){let t=new FileReader;t.onload=n=>{this.url=n.target.result},t.readAsArrayBuffer(this.file)}checkFile(t){this.error=t.size>=1e9?"Maximum size 1000mb":this.accept.includes(t.type)?"":"Incorrect format"}replaceForbidden(t){return t.replace(/..\/|"|'|&|\/|\\|\?|#|\[|\]|%|:/g,"-")}reloadFile(){!this.fileDropEl||this.fileDropEl.nativeElement.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}onDeleteFile(){this.file=null,this.url="",this.isPreviewReady=!1,this.deleteFileEvent.emit()}get isShowResult(){return!this.isOneStep&&(this.isAsImage?this.url||this.file?.url:this.file)}isReady(t){this.isPreviewReady=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.C),e.Y36(g.h),e.Y36(e.SBq))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload"]],viewQuery:function(t,n){if(1&t&&e.Gf(O,5),2&t){let d;e.iGM(d=e.CRH())&&(n.fileDropEl=d.first)}},inputs:{text:"text",isShowRequirement:"isShowRequirement",file:"file",accept:"accept",isAsImage:"isAsImage",isOneStep:"isOneStep",isMarkAsRequired:"isMarkAsRequired",rotate:"rotate"},outputs:{loadedFileEvent:"loadedFileEvent",deleteFileEvent:"deleteFileEvent"},features:[e._Bn([g.h])],decls:11,vars:9,consts:[["appDnd","",1,"container",3,"ngClass","fileDropped"],["type","file","id","fileDropRef",1,"no-select",3,"accept","change"],["fileDropRef",""],["width","33","height","26","viewBox","0 0 33 26","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M26.6768 8.88282L26.7502 9.17525L27.0431 9.2468C29.9457 9.95586 31.9909 12.5527 31.9999 15.5406C32.0109 19.1298 29.1102 22.0483 25.5211 22.0595C25.5209 22.0595 25.5207 22.0595 25.5204 22.0595L22.0224 22.0595V21.0597L25.522 21.0597L25.5245 21.0597C28.2518 21.0461 30.5571 19.0357 30.9416 16.3356L30.4466 16.2651L30.9416 16.3356C31.3697 13.3287 29.2793 10.544 26.2724 10.1158L26.2724 10.1158L26.2677 10.1152C26.0548 10.0869 25.8838 9.92597 25.8427 9.71522L25.8425 9.71419C24.9641 5.25869 21.0548 2.04815 16.5134 2.0527C11.2675 2.05791 7.01892 6.31478 7.02393 11.5607C7.02393 11.8368 6.80015 12.0606 6.52404 12.0606C4.03901 12.0606 2.02447 14.0751 2.02447 16.5602C2.02447 19.0452 4.03901 21.0597 6.52404 21.0597H11.0235V22.0595L6.52404 22.0595L6.52205 22.0595C3.82199 22.0702 1.51353 20.1192 1.07421 17.455L0.580874 17.5364L1.07421 17.455C0.580016 14.4583 2.60875 11.6284 5.6055 11.1342L5.99424 11.07L6.02283 10.6771C6.35163 6.15779 9.54285 2.35931 13.9378 1.25604C19.5617 -0.155691 25.2651 3.25892 26.6768 8.88282Z","fill","#1B469B","stroke","#1B469B"],["d","M16.8704 13.204L20.5153 16.8489L19.8126 17.5517L17.8764 15.6155L17.0229 14.7619V15.969V25.058H16.0231V15.969V14.7656L15.1703 15.6147L13.2241 17.5524L12.5206 16.8489L16.1655 13.204C16.1657 13.2038 16.1658 13.2037 16.166 13.2035C16.3609 13.0103 16.6751 13.0103 16.87 13.2036C16.8701 13.2037 16.8702 13.2038 16.8704 13.204Z","fill","#1B469B","stroke","#1B469B"],[1,"text"],["class","requirement",4,"ngIf"],["class","error",4,"ngIf"],["class","result",4,"ngIf"],[1,"requirement"],[1,"error"],[1,"result"],["class","result__img",3,"ngClass",4,"ngIf","ngIfElse"],["document",""],[1,"result__img",3,"ngClass"],[3,"src","previewUrl","rotate","isReady"],[1,"document"],[3,"file","isReloadBtn","isDeleteBtn","deleteFileEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("fileDropped",function(p){return n.onFileDropped(p)}),e.TgZ(1,"input",1,2),e.NdJ("change",function(p){return n.fileBrowseHandler(p)}),e.qZA(),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA(),e.kcU(),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.YNc(8,M,2,0,"div",7),e.YNc(9,D,2,1,"div",8),e.qZA(),e.YNc(10,s,4,2,"div",9)),2&t&&(e.Q6J("ngClass",e.WLB(6,h,n.isShowResult,n.isMarkAsRequired)),e.xp6(1),e.Q6J("accept",n.accept),e.xp6(6),e.Oqu(n.text),e.xp6(1),e.Q6J("ngIf",n.isShowRequirement),e.xp6(1),e.Q6J("ngIf",n.error),e.xp6(1),e.Q6J("ngIf",n.isShowResult))},dependencies:[m.mk,m.O5,C,w.M,x.D],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;width:100%;height:100%;border-radius:6px;background-image:url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%237d94d8' stroke-width='1' stroke-dasharray='12%2c 8' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\");transition:.3s ease-out,height 0s}.container[_ngcontent-%COMP%]:hover{background-color:#f5faff}.container.hidden[_ngcontent-%COMP%]{height:0;visibility:hidden;z-index:-99}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:0;z-index:2;cursor:pointer}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{text-align:center;color:#7d94d8}.container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-top:8px;font-size:12px}.container[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{font-size:8px;line-height:initial}.container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{position:absolute;bottom:-24px;left:0;color:#d82e2e;font-size:12px}.container.mark-required[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23d82e2e' stroke-width='1' stroke-dasharray='12%2c 8' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\");background-color:#ffe6e6}.container.mark-required[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#d82e2e}.container.mark-required[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .container.mark-required[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{color:#d82e2e}.fileover[_ngcontent-%COMP%]{background-color:#f5faff}.result[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.result__img[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:#000000d9;border-top-left-radius:4px;border-top-right-radius:4px}.result__img.small[_ngcontent-%COMP%]{border-radius:4px}.result[_ngcontent-%COMP%]   .document[_ngcontent-%COMP%]{width:100%}"]}),i})()},4732:(P,f,o)=>{o.d(f,{c:()=>_});var e=o(3811);function _(g){return Object.values(g).map(u=>(0,e.Q)(u))}}}]);