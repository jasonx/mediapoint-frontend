"use strict";(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[629],{4104:(C,v,i)=>{i.d(v,{q:()=>p});var o=i(8760),s=i(1571),l=i(5384),u=i(1438);let p=(()=>{class c{constructor(_,O){this.apiService=_,this.authorizationService=O}getInvoices(_){return this.apiService.get((0,o.bC)(this.isAdmin,o.T5.INVOICES)+_)}getInvoice(_){return this.apiService.get(o.wY.generate((0,o.bC)(this.isAdmin,o.T5.INVOICES_BY_ID),{invoiceId:_}))}getInvoicesFilter(){return this.apiService.get((0,o.bC)(this.isAdmin,o.T5.INVOICES_FILTER))}getOrderPdf(_){return this.apiService.getBlob(o.wY.generate((0,o.bC)(this.isAdmin,o.T5.INVOICES_PDF),{invoiceId:_}))}get isAdmin(){return this.authorizationService.isAdmin}}return c.\u0275fac=function(_){return new(_||c)(s.LFG(l.s),s.LFG(u.Z))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},2629:(C,v,i)=>{i.d(v,{_:()=>L});var o=i(5412),s=i(2722),l=i(9673),u=i(3364),p=i(2893),c=i(8672),m=i(7973),_=i(2810),O=i(7188),t=i(1571),h=i(6109),P=i(5453),M=i(4104),x=i(1438),g=i(6895),T=i(42),D=i(7268),f=i(2914),Z=i(605),b=i(2834);function E(e,a){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n)}}function I(e,a){if(1&e&&(t.TgZ(0,"div",31)(1,"div",32),t._uU(2,"Bill to:"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(4),t.Oqu(n.invoiceData.billTo.companyName),t.xp6(2),t.Oqu(n.invoiceData.billTo.address1),t.xp6(2),t.Oqu(n.invoiceData.billTo.address2),t.xp6(2),t.Oqu(n.invoiceData.billTo.suburb),t.xp6(2),t.Oqu(n.invoiceData.billTo.state),t.xp6(2),t.Oqu(n.invoiceData.billTo.postcode)}}function A(e,a){if(1&e&&(t.TgZ(0,"div",31)(1,"div",32),t._uU(2,"Ship to:"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(4),t.Oqu(n.invoiceData.billTo.companyName),t.xp6(2),t.Oqu(n.invoiceData.shipTo.address1),t.xp6(2),t.Oqu(n.invoiceData.shipTo.address2),t.xp6(2),t.Oqu(n.invoiceData.shipTo.suburb)}}function U(e,a){if(1&e&&(t.TgZ(0,"tr",33)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"currency"),t.qZA()()),2&e){const n=a.$implicit;t.xp6(2),t.hij("#",n.id,""),t.xp6(2),t.Oqu(n.typeOfPrint),t.xp6(2),t.Oqu(n.size),t.xp6(2),t.Oqu(n.quantity),t.xp6(2),t.Oqu(n.numberOfKinds),t.xp6(2),t.Oqu(n.totalQuantity),t.xp6(2),t.Oqu(t.lcZ(15,7,n.price))}}function y(e,a){if(1&e&&(t.TgZ(0,"div",34),t._UZ(1,"app-pdf-block",35),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("file",n.file)("isDownloadBtn",!0)}}function q(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",36)(1,"app-button",37),t.NdJ("clickEvent",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.onPayment())}),t.qZA()()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("buttonConfig",n.buttonPaymentConfig)}}function R(e,a){if(1&e&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"app-breadcrumbs",4),t.qZA(),t.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8),t._uU(7,"Tax Invoice"),t.qZA(),t.TgZ(8,"div",9),t._uU(9),t.qZA()(),t.TgZ(10,"div",10)(11,"div",11)(12,"div",12),t._uU(13),t.qZA(),t.TgZ(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16),t._uU(18,"Date:"),t.qZA(),t.TgZ(19,"div",17),t._uU(20),t.ALo(21,"date"),t.qZA()(),t.TgZ(22,"div",15)(23,"div",16),t._uU(24,"Due Date:"),t.qZA(),t.TgZ(25,"div",17),t._uU(26),t.ALo(27,"date"),t.qZA()(),t.TgZ(28,"div",15)(29,"div",16),t._uU(30,"Customer PO:"),t.qZA(),t.TgZ(31,"div",17),t._uU(32),t.qZA()()(),t.TgZ(33,"div",18),t.YNc(34,E,2,1,"p",19),t.qZA()(),t.TgZ(35,"div",13),t.YNc(36,I,15,6,"div",20),t.YNc(37,A,11,4,"div",20),t.qZA()(),t.TgZ(38,"div",21)(39,"div",22),t._uU(40,"Order summary"),t.qZA(),t.TgZ(41,"div",23)(42,"table",24)(43,"tr",25)(44,"th"),t._uU(45,"Job number"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Product"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Size"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Quantity"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Kind"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Total quantity"),t.qZA(),t.TgZ(56,"th"),t._uU(57,"Price"),t.qZA()(),t.YNc(58,U,16,9,"tr",26),t.qZA()()(),t.YNc(59,y,2,2,"div",27),t.qZA()(),t.TgZ(60,"div",28),t._UZ(61,"app-price-data",29),t.YNc(62,q,2,1,"div",30),t.qZA()()()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("breadcrumbsData",n.breadcrumbs),t.xp6(6),t.Q6J("ngClass",n.toKebabCase(n.invoiceData.status)),t.xp6(1),t.hij(" ",n.invoiceData.status," "),t.xp6(4),t.hij("Invoice # ",n.invoiceData.id,""),t.xp6(7),t.hij(" ",t.xi3(21,16,n.invoiceData.createdAt,"dd/MM/YY")," "),t.xp6(6),t.hij(" ",t.xi3(27,19,n.invoiceData.dueDate,"dd/MM/YY")," "),t.xp6(6),t.hij(" ",n.invoiceData.poNumber," "),t.xp6(2),t.Q6J("ngForOf",n.invoiceData.general),t.xp6(2),t.Q6J("ngIf",n.invoiceData.billTo),t.xp6(1),t.Q6J("ngIf",n.invoiceData.shipTo),t.xp6(21),t.Q6J("ngForOf",n.invoiceData.jobs),t.xp6(1),t.Q6J("ngIf",n.file),t.xp6(2),t.Q6J("title","Price")("isInvoice",!0)("priceDetails",n.invoiceData.priceDetails),t.xp6(1),t.Q6J("ngIf",n.isShowPayBtn)}}function B(e,a){1&e&&t._UZ(0,"app-loader")}let L=(()=>{class e{constructor(n,d,r,w,K,W,S){this.createOrderService=n,this.dialog=d,this.destroy$=r,this.router=w,this.invoiceService=K,this.authorizationService=W,this.activatedRoute=S,this.toKebabCase=c.m,this.breadcrumbs=[{name:"Invoices",url:"back"},{name:this.activatedRoute.snapshot.params?.invoiceId}],this.buttonPaymentConfig={text:"Payment",viewType:l.F.Filled,minWidth:"100%"},this.dialogThanksConfig={icon:_.H.EMAIL,title:"Thanks for your order",message:"Your order is being processed with care. If you have any questions, feel free to contact us.",informationButtonText:"Go home"}}ngOnInit(){this.invoiceId=this.activatedRoute.snapshot.params?.invoiceId,this.getInvoice(),this.getInvoicePdf()}getInvoice(){this.invoiceService.getInvoice(this.invoiceId).subscribe(n=>{this.invoiceData=n,this.createOrderService.cartId.next(this.invoiceData.cartId)})}getInvoicePdf(){this.invoiceService.getOrderPdf(this.invoiceId).pipe((0,s.R)(this.destroy$)).subscribe(n=>{this.file=new File([n],`Invoice-${this.invoiceId}.pdf`)})}onPayment(){let n=new o.vA;n={...n,width:"100%",maxWidth:"580px",maxHeight:"90vh"},this.dialog.open(m.A,n).afterClosed().pipe((0,s.R)(this.destroy$)).subscribe(r=>{r&&this.openThanksModal()})}openThanksModal(){let n=new o.vA;n={...n,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogThanksConfig},this.dialog.open(O.a,n).afterClosed().pipe((0,s.R)(this.destroy$)).subscribe(()=>this.router.navigate(["./"]).then())}get isShowPayBtn(){return this.invoiceData.status===u.UY.NotPaid&&!this.authorizationService.isAdmin}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.g),t.Y36(o.uw),t.Y36(p.h),t.Y36(P.F0),t.Y36(M.q),t.Y36(x.Z),t.Y36(P.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-invoice-details"]],features:[t._Bn([p.h])],decls:3,vars:2,consts:[["class","invoice",4,"ngIf","ngIfElse"],["loading",""],[1,"invoice"],[1,"breadcrumbs"],[3,"breadcrumbsData"],[1,"grid-container"],[1,"grid-container__main","invoice"],[1,"invoice_top"],[1,"title-main"],[1,"status-label",3,"ngClass"],[1,"app-block"],[1,"main"],[1,"main__title"],[1,"main_row"],[1,"date"],[1,"date_row"],[1,"date__title"],[1,"date__value"],[1,"address"],[4,"ngFor","ngForOf"],["class","address-to",4,"ngIf"],[1,"summary"],[1,"title-block"],[1,"table-simple"],[1,"table"],[1,"table__header"],["class","table__row",4,"ngFor","ngForOf"],["class","pdf",4,"ngIf"],[1,"grid-container__sidebar","price","fixed"],[3,"title","isInvoice","priceDetails"],["class","button",4,"ngIf"],[1,"address-to"],[1,"main_row__title"],[1,"table__row"],[1,"pdf"],[3,"file","isDownloadBtn"],[1,"button"],[3,"buttonConfig","clickEvent"]],template:function(n,d){if(1&n&&(t.YNc(0,R,63,22,"div",0),t.YNc(1,B,1,0,"ng-template",null,1,t.W1O)),2&n){const r=t.MAs(2);t.Q6J("ngIf",d.invoiceData)("ngIfElse",r)}},dependencies:[g.mk,g.sg,g.O5,T.r,D.w,f.D,Z.R,b.n,g.H9,g.uU],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.invoice_top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:17px}.invoice[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{margin-left:8px}.invoice[_ngcontent-%COMP%]   .app-block[_ngcontent-%COMP%]{padding:16px 24px}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{margin-bottom:24px;padding:24px 16px;background:#EEF6FF;border-radius:6px}.invoice[_ngcontent-%COMP%]   .main__title[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.invoice[_ngcontent-%COMP%]   .main_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:56px}.invoice[_ngcontent-%COMP%]   .main_row__title[_ngcontent-%COMP%]{margin-bottom:12px;font-weight:500;font-size:16px}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .date_row[_ngcontent-%COMP%]{display:flex;margin-bottom:4px}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .date__title[_ngcontent-%COMP%]{margin-right:43px;color:#5a5c81}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .date__value[_ngcontent-%COMP%]{margin:0 0 0 auto;font-weight:500;font-size:16px;letter-spacing:.015em}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{text-align:right;line-height:140%}.invoice[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .address-to[_ngcontent-%COMP%]{line-height:140%}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]{margin-bottom:16px}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{border-spacing:0}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__header[_ngcontent-%COMP%]{background-color:#d4e1ff}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:7px 35px;text-align:left;font-size:12px;font-weight:500;border-bottom:1px solid #DBE4F6}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:13px 35px;color:#5a5c81;font-size:13px;border-bottom:1px solid #DBE4F6;white-space:nowrap}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.invoice[_ngcontent-%COMP%]   .table-simple[_ngcontent-%COMP%]{max-width:calc(100vw - 728px)}.invoice[_ngcontent-%COMP%]   .pdf[_ngcontent-%COMP%]{min-width:400px;margin-top:24px}.invoice[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-top:45px}.invoice[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-top:22px}@media screen and (max-width: 1280px){.invoice[_ngcontent-%COMP%]   .table-simple[_ngcontent-%COMP%]{max-width:calc(100vw - 644px)}}@media screen and (max-width: 1024px){.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px 24px}.invoice[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:13px 24px}}"]}),e})()}}]);