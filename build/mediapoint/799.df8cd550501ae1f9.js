"use strict";(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[799],{2810:(w,x,i)=>{i.d(x,{H:()=>_});const _={LOCK:{src:"../../../../assets/images/icons/lock.svg",alt:"Lock"},EMAIL:{src:"../../../../assets/images/icons/email.svg",alt:"Email"},WALLET:{src:"../../../../assets/images/icons/wallet.svg",alt:"Wallet"}}},2672:(w,x,i)=>{i.r(x),i.d(x,{OrdersModule:()=>ne});var _=i(6895),C=i(5453),v=i(5073),m=i(7340),h=i(2722),A=i(262),u=i(3364),b=i(2893),y=i(2686),g=i(3184),T=i(5064),l=(()=>{return(n=l||(l={})).Order="Orders",n.Job="Jobs",l;var n})(),f=i(4732),S=i(4327),D=i.n(S),O=i(5412),N=i(6611),E=i(9418),U=i(7188),Y=i(6316),J=i(5817),t=i(1571),Q=i(3945);let k=(()=>{class n{constructor(e){this.data=e,this.artworksImgs=[],e&&(this.artworksImgs=e.imgs)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal-artworks-gallery"]],decls:2,vars:3,consts:[[1,"gallert-wrap"],[3,"setImages","isShowBtn","customClass"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-gallery",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("setImages",o.artworksImgs)("isShowBtn",!1)("customClass","artworks"))},dependencies:[Q.v],styles:[".gallert-wrap[_ngcontent-%COMP%]{width:80vw;max-width:923px;max-height:90vh;overflow:auto;padding:16px}"]}),n})();var F=i(6854),I=i(1864),d=i(7155),P=i(6709),M=i(6308),Z=i(1581),B=i(7125),j=i(5216),q=i(9727),R=i(8348),$=i(7499),L=i(7758),H=i(3113),z=i(4336),G=i(605);function K(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"app-tabs",13),t.NdJ("selectEvent",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.changeFilterType(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("tabs",e.filterTypeTabs)("selectedTab",e.selectedTab)}}function W(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15),t._uU(2),t.qZA(),t.TgZ(3,"div",16)(4,"app-status",17),t.NdJ("changeEvent",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.changeOrderStatus(a))}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" Selected items: ",e.selection.selected.length," "),t.xp6(2),t.Q6J("isIcon",!0)("statusArray",e.orderStatusArray)("selectedMaxId",e.selectedStatusId)}}function X(n,r){1&n&&t._UZ(0,"th",43)}function V(n,r){1&n&&t._UZ(0,"td",44)}function tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"th",43)(1,"mat-checkbox",45),t.NdJ("change",function(a){t.CHM(e);const c=t.oxw(4);return t.KtG(a?c.toggleAllRows():null)}),t.qZA()()}if(2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",44)(1,"div",46)(2,"mat-checkbox",47),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=t.CHM(e).$implicit,p=t.oxw(4);return t.KtG(a?p.onToggleCheckbox(s.id):null)}),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("checked",o.selection.isSelected(e.id))}}function nt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Order number "),t.qZA())}function ot(n,r){if(1&n&&(t.TgZ(0,"td",44)(1,"a",49),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("routerLink",o.generalUrl+"/order/"+e.id),t.xp6(1),t.hij(" #",e.id," ")}}function rt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Customer"),t.qZA())}function at(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.customer," ")}}function it(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Accepted"),t.qZA())}function ct(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.hij(" ",o.getDate(e.accepted)," ")}}function st(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Dispatch ETA "),t.qZA())}function _t(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.hij(" ",o.getDate(e.dispatchEta)," ")}}function lt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Total price "),t.qZA())}function dt(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.totalPrice)," ")}}function pt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Status"),t.qZA())}function gt(n,r){if(1&n&&(t.TgZ(0,"td",44)(1,"span",50),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngClass",o.toKebabCase(e.status)),t.xp6(1),t.hij(" ",e.status," ")}}function mt(n,r){1&n&&t._UZ(0,"th",51)}function ht(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"td",44)(1,"div",52)(2,"app-options-menu",53),t.NdJ("exportEvent",function(){const c=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.onExportXML(c.id))})("reprocessEvent",function(){const c=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.onReprocess(c.id))}),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("nameItem","order")("listOfOptions",o.getListOfOptions(e.isXmlAvailable))}}function ut(n,r){1&n&&(t.TgZ(0,"th",54),t._uU(1," \xa0 "),t.qZA())}function Ct(n,r){if(1&n&&(t.TgZ(0,"td",44),t._UZ(1,"img",55),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.ekj("open",o.isExpanded(e))}}function xt(n,r){1&n&&(t.TgZ(0,"div",64),t._UZ(1,"img",67),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tooltip","Artwork error"))}function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",60),t.NdJ("mouseup",function(a){t.CHM(e);const c=t.oxw().$implicit,s=t.oxw(4);return t.KtG(s.goToDetailsPage(a,c.id,"./order"))}),t.TgZ(1,"td",61)(2,"div",62),t.YNc(3,xt,2,1,"div",63),t.TgZ(4,"div",64),t._UZ(5,"img",65),t.qZA()()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"td")(20,"img",66),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG(s.displayArtwork(c.artworks))}),t.qZA()(),t.TgZ(21,"td")(22,"span",50),t._uU(23),t.qZA()(),t._UZ(24,"td"),t.qZA()}if(2&n){const e=r.$implicit,o=t.oxw(5);t.xp6(3),t.Q6J("ngIf",e.errorArtwork),t.xp6(2),t.Q6J("src",e.productIcon,t.LSH)("tooltip",e.productName),t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.productName),t.xp6(2),t.Oqu(o.numberMask(e.quantity)),t.xp6(2),t.Oqu(o.getDate(e.accepted)),t.xp6(2),t.Oqu(o.getDate(e.jobEntered)),t.xp6(2),t.Oqu(t.lcZ(18,12,e.price)),t.xp6(3),t.Q6J("src",null==e.artworks[0]?null:e.artworks[0].previewUrl,t.LSH),t.xp6(2),t.Q6J("ngClass",o.toKebabCase(e.status)),t.xp6(1),t.hij(" ",e.status," ")}}function Ot(n,r){if(1&n&&(t.TgZ(0,"td",44)(1,"div",56)(2,"table",57)(3,"tr",58),t._UZ(4,"th"),t.TgZ(5,"th"),t._uU(6,"Job number"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type of print"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Accepted"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Job entered"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Price"),t.qZA(),t._UZ(17,"th"),t.TgZ(18,"th"),t._uU(19,"Job Status"),t.qZA(),t._UZ(20,"th"),t.qZA(),t.YNc(21,ft,25,14,"tr",59),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(4);t.uIk("colspan",o.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",o.isExpanded(e)?"expanded":"collapsed"),t.xp6(20),t.Q6J("ngForOf",e.jobs)}}function Mt(n,r){1&n&&t._UZ(0,"tr",68)}const bt=function(n,r,e){return{selected:n,open:r,last:e}};function Tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",69),t.NdJ("click",function(a){const s=t.CHM(e).$implicit,p=t.oxw(4);return t.KtG(p.setExpandedElement(a,s))}),t.qZA()}if(2&n){const e=r.$implicit,o=t.oxw(4);t.Q6J("ngClass",t.kEZ(1,bt,o.selection.isSelected(e.id),o.isExpanded(e),o.dataSource.data[o.dataSource.data.length-1]===e))}}function Pt(n,r){1&n&&t._UZ(0,"tr",70)}const Zt=function(){return["expandedDetail"]};function wt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"table",23),t.NdJ("matSortChange",function(a){t.CHM(e);const c=t.oxw(3);return t.KtG(c.sortData(a))}),t.ynx(1,24),t.YNc(2,X,1,0,"th",25),t.YNc(3,V,1,0,"td",26),t.BQk(),t.ynx(4,27),t.YNc(5,tt,2,2,"th",25),t.YNc(6,et,3,1,"td",26),t.BQk(),t.ynx(7,28),t.YNc(8,nt,2,0,"th",29),t.YNc(9,ot,3,2,"td",26),t.BQk(),t.ynx(10,30),t.YNc(11,rt,2,0,"th",29),t.YNc(12,at,2,1,"td",26),t.BQk(),t.ynx(13,31),t.YNc(14,it,2,0,"th",29),t.YNc(15,ct,2,1,"td",26),t.BQk(),t.ynx(16,32),t.YNc(17,st,2,0,"th",29),t.YNc(18,_t,2,1,"td",26),t.BQk(),t.ynx(19,33),t.YNc(20,lt,2,0,"th",29),t.YNc(21,dt,3,3,"td",26),t.BQk(),t.ynx(22,34),t.YNc(23,pt,2,0,"th",29),t.YNc(24,gt,3,2,"td",26),t.BQk(),t.ynx(25,35),t.YNc(26,mt,1,0,"th",36),t.YNc(27,ht,3,2,"td",26),t.BQk(),t.ynx(28,37),t.YNc(29,ut,2,0,"th",38),t.YNc(30,Ct,2,2,"td",26),t.BQk(),t.ynx(31,39),t.YNc(32,Ot,22,3,"td",26),t.BQk(),t.YNc(33,Mt,1,0,"tr",40),t.YNc(34,Tt,1,5,"tr",41),t.YNc(35,Pt,1,0,"tr",42),t.qZA()}if(2&n){const e=t.oxw(3);t.ekj("admin",e.isAdmin),t.Q6J("dataSource",e.dataSource),t.xp6(33),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,Zt))}}function vt(n,r){1&n&&t._UZ(0,"th",43)}function At(n,r){1&n&&t._UZ(0,"img",67),2&n&&t.Q6J("tooltip","Artwork error")}function yt(n,r){if(1&n&&(t.TgZ(0,"td",79)(1,"div",62),t.YNc(2,At,1,1,"img",80),t._UZ(3,"img",65),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",e.errorArtwork),t.xp6(1),t.Q6J("src",e.productIcon,t.LSH)("tooltip",e.productName)}}function St(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Job number "),t.qZA())}function Dt(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Nt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Type of print "),t.qZA())}function Et(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.productName," ")}}function Ut(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Quantity "),t.qZA())}function Yt(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.hij(" ",o.numberMask(e.quantity)," ")}}function Jt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Size"),t.qZA())}function Qt(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.size," ")}}function kt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Accepted "),t.qZA())}function Ft(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.hij(" ",o.getDate(e.accepted)," ")}}function It(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1,"Price"),t.qZA())}function Bt(n,r){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.price)," ")}}function jt(n,r){1&n&&(t.TgZ(0,"th",48),t._uU(1," Job Status "),t.qZA())}function qt(n,r){if(1&n&&(t.TgZ(0,"td",44)(1,"span",50),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngClass",o.toKebabCase(e.status)),t.xp6(1),t.hij(" ",e.status," ")}}function Rt(n,r){1&n&&t._UZ(0,"tr",68)}function $t(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",81),t.NdJ("mouseup",function(a){const s=t.CHM(e).$implicit,p=t.oxw(4);return t.KtG(p.goToDetailsPage(a,s.orderId,"./order"))}),t.qZA()}}function Lt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"table",71),t.NdJ("matSortChange",function(a){t.CHM(e);const c=t.oxw(3);return t.KtG(c.sortData(a))}),t.ynx(1,72),t.YNc(2,vt,1,0,"th",25),t.YNc(3,yt,4,3,"td",73),t.BQk(),t.ynx(4,28),t.YNc(5,St,2,0,"th",29),t.YNc(6,Dt,2,1,"td",26),t.BQk(),t.ynx(7,74),t.YNc(8,Nt,2,0,"th",29),t.YNc(9,Et,2,1,"td",26),t.BQk(),t.ynx(10,75),t.YNc(11,Ut,2,0,"th",29),t.YNc(12,Yt,2,1,"td",26),t.BQk(),t.ynx(13,76),t.YNc(14,Jt,2,0,"th",29),t.YNc(15,Qt,2,1,"td",26),t.BQk(),t.ynx(16,31),t.YNc(17,kt,2,0,"th",29),t.YNc(18,Ft,2,1,"td",26),t.BQk(),t.ynx(19,77),t.YNc(20,It,2,0,"th",29),t.YNc(21,Bt,3,3,"td",26),t.BQk(),t.ynx(22,34),t.YNc(23,jt,2,0,"th",29),t.YNc(24,qt,3,2,"td",26),t.BQk(),t.YNc(25,Rt,1,0,"tr",40),t.YNc(26,$t,1,0,"tr",78),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("dataSource",e.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}const Ht=function(){return[5,10,20]};function zt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-paginator",82),t.NdJ("page",function(a){t.CHM(e);const c=t.oxw(3);return t.KtG(c.onChangePage(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("length",e.totalItems)("pageSize",e.params.perPage)("pageSizeOptions",t.DdM(4,Ht))("pageIndex",e.params.currentPage-1)}}function Gt(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19),t.YNc(2,wt,36,7,"table",20),t.YNc(3,Lt,27,3,"ng-template",null,21,t.W1O),t.YNc(5,zt,1,5,"mat-paginator",22),t.qZA(),t.BQk()),2&n){const e=t.MAs(4),o=t.oxw(2);t.xp6(2),t.Q6J("ngIf",o.isFilteredByOrder)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",o.totalItems>o.params.perPage)}}function Kt(n,r){if(1&n&&t._UZ(0,"app-no-results",83),2&n){const e=t.oxw(2);t.Q6J("isSearch",e.isSearch)("noResultsText","You don't have orders yet")}}function Wt(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Gt,6,3,"ng-container",10),t.YNc(2,Kt,1,2,"ng-template",null,18,t.W1O),t.BQk()),2&n){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.dataSource.data.length)("ngIfElse",e)}}function Xt(n,r){1&n&&t._UZ(0,"app-loader")}const Vt=[{path:"",component:(()=>{class n extends g.O{constructor(e,o,a,c,s,p,oe,re,ae){super(e,o,a,c,s),this.orderService=p,this.dialog=oe,this.toast=re,this.datePipe=ae,this.displayedColumns=[],this.filterConfig={isLoaded:!1,filterType:l.Order,statuses:(0,f.c)(u.iF),isSizeRange:!0,isQuantity:!0,isFilterDate:!0,filterDateTitle:this.isAdmin?"Data accepted":"",isFilterPrise:!0},this.filterTypeTabs=[{index:0,title:l.Order},{index:1,title:l.Job}],this.expandedElements=[],this.listOfOptions=[T.m.Reprocess],this.orderStatusArray=u.hc,this.selectedStatusId=0,this.dialogSuccessConfig={title:"Success!",isSuccess:!0}}getData(){this.orderService.getTableData((0,y.f)(this.params)).pipe((0,h.R)(this.destroy$)).subscribe(e=>{this.initFilters(),this.setData(e),this.orderService.statusChangesData={orders:[]}})}initFilters(){const e=(0,J.f)(this.params.filterType)||l.Order;this.selectedTab={index:e===l.Order?0:1,title:e},this.filterConfig={...this.filterConfig,isLoaded:!0,filterType:e,statuses:(0,f.c)(e===l.Order?u.iF:u.By)},this.initTable()}initTable(){this.displayedColumns=this.isFilteredByOrder?this.isAdmin?["select","id","customer","accepted","jobEntered","dispatchEta","totalPrice","status","menu","expand"]:["empty","id","customer","accepted","dispatchEta","totalPrice","status","expand"]:["icon","id","productName","quantity","size","accepted","price","status"]}getFilter(){this.orderService.getOrdersFilter().pipe((0,h.R)(this.destroy$)).subscribe(e=>{this.setFilter(e)})}setDateToParams(){const e=this.filterLabels?.startDate,o=this.filterLabels?.endDate;this.params=this.isAdmin?{...this.params,createdAtFrom:e?(0,_.p6)(e,g.zT,g.MV):"",createdAtTo:o?(0,_.p6)(o,g.zT,g.MV):""}:{...this.params,dispatchEtaAtFrom:e?(0,_.p6)(e,g.zT,g.MV):"",dispatchEtaAtTo:o?(0,_.p6)(o,g.zT,g.MV):""}}changeFilterType(e){if(e.title===this.selectedTab.title)return;const o=e.title;this.selectedTab=e,this.params={...this.params,filterType:o.toLowerCase(),currentPage:1},this.filterConfig={...this.filterConfig,filterType:o,statuses:(0,f.c)(o===l.Order?u.iF:u.By)},this.isDataLoaded=!1,this.updateUrl(),this.initTable()}searchByFilters(e){super.searchByFilters(e),this.initTable()}setExpandedElement(e,o){if(e.target.className.includes("btn"))return;const c=this.expandedElements.indexOf(o);-1===c?this.expandedElements.push(o):this.expandedElements.splice(c,1),e.stopPropagation()}isExpanded(e){return this.expandedElements.includes(e)}onExportXML(e){this.orderService.exportOrder(e).pipe((0,h.R)(this.destroy$)).subscribe(o=>{const a=new File([o],`Order-${e}.xml`);D()(a,a.name)})}onReprocess(e){this.orderService.updateMaps(e).pipe((0,h.R)(this.destroy$)).subscribe(()=>this.openSuccessDialog())}openSuccessDialog(){let e=new O.vA;e={...e,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogSuccessConfig},this.dialog.open(U.a,e)}getListOfOptions(e){return e?[T.m.Export,...this.listOfOptions]:this.listOfOptions}toggleAllRows(){super.toggleAllRows(),this.orderService.statusChangesData.orders=[],this.selection.selected.forEach(e=>{this.setSelectedStatus(e)})}onToggleCheckbox(e){this.selection.toggle(e),this.setSelectedStatus(e)}setSelectedStatus(e){const o=this.selection.isSelected(e),{orders:a}=this.orderService.statusChangesData;if(o){const s=this.dataSource.data.find(p=>p.id===e)?.status;if(!s)return;a?.push({id:e,oldStatus:s})}else this.orderService.statusChangesData.orders=a?.filter(s=>s.id!==e);const c=this.orderService.statusChangesData.orders?.map(s=>this.orderStatusArray.find(p=>p.status===s.oldStatus)?.groupIndex||0)||[];this.selectedStatusId=Math.max(...c)}changeOrderStatus(e){this.orderService.statusChangesData.orders=this.orderService.statusChangesData.orders?.map(o=>({...o,newStatus:e})),this.openConfirmDialog()}openConfirmDialog(){this.dialog.open(N.V).afterClosed().pipe((0,h.R)(this.destroy$)).subscribe(o=>{o===E.u.Accept&&this.orderService.changeStatus(this.selection.selected).pipe((0,h.R)(this.destroy$),(0,A.K)(a=>{throw 422===a.status&&this.toast.show("This status cannot be changed!",{position:"top-center",duration:5e3,style:{boxShadow:"0 3px 12px #ffecec",border:"1px solid #A83B3B",padding:"16px",color:"#A83B3B"}}),this.getData(),a})).subscribe(()=>{this.getData()})})}displayArtwork(e){const o=e.map(a=>a.previewUrl);this.dialog.open(k,{data:{imgs:o}})}getDate(e){return new Y._(this.datePipe).getDate(e)}get isFilteredByOrder(){return this.selectedTab&&this.selectedTab.title===l.Order}get isAdmin(){return this.orderService.isAdmin}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.F0),t.Y36(C.gz),t.Y36(b.h),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(F.p),t.Y36(O.uw),t.Y36(I.jE),t.Y36(_.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-orders"]],features:[t._Bn([b.h]),t.qOj],decls:14,vars:7,consts:[[1,"orders","wrap"],[1,"title-main"],[1,"top"],[1,"top__search"],[3,"placeholder","searchEvent"],["class","top_tabs",4,"ngIf"],[1,"top__filter"],[3,"setFilterConfig","searchEvent"],[3,"setFilterLabels","clearLabelsEvent"],["class","selected-block",4,"ngIf"],[4,"ngIf","ngIfElse"],["loading",""],[1,"top_tabs"],[3,"tabs","selectedTab","selectEvent"],[1,"selected-block"],[1,"selected-item"],[1,"buttons"],[3,"isIcon","statusArray","selectedMaxId","changeEvent"],["noResults",""],[1,"table-wrap"],["mat-table","","matSort","","multiTemplateDataRows","","class","table orders",3,"admin","dataSource","matSortChange",4,"ngIf","ngIfElse"],["jobsTable",""],[3,"length","pageSize","pageSizeOptions","pageIndex","page",4,"ngIf"],["mat-table","","matSort","","multiTemplateDataRows","",1,"table","orders",3,"dataSource","matSortChange"],["matColumnDef","empty"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","select"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","customer"],["matColumnDef","accepted"],["matColumnDef","dispatchEta"],["matColumnDef","totalPrice"],["matColumnDef","status"],["matColumnDef","menu"],["mat-header-cell","","class","small",4,"matHeaderCellDef"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions","class","small",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","indeterminate","change"],[1,"checkbox-wrap"],[3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],[1,"hover",3,"routerLink"],[1,"status-label",3,"ngClass"],["mat-header-cell","",1,"small"],[1,"menu"],[3,"nameItem","listOfOptions","exportEvent","reprocessEvent"],["mat-header-cell","","aria-label","row actions",1,"small"],["src","./assets/images/icons/arrow-down.svg","alt","Expand",1,"arrow"],[1,"expanded_details"],[1,"table","jobs-table"],[1,"table__header"],["class","table__row",3,"mouseup",4,"ngFor","ngForOf"],[1,"table__row",3,"mouseup"],[1,"td_icons"],[1,"icons"],["class","icon-wrap",4,"ngIf"],[1,"icon-wrap"],["alt","Product",1,"icon","icon-product",3,"src","tooltip"],["alt","artwork",1,"artwork",3,"src","click"],["src","./assets/images/icons/warning-red.svg","alt","Error",1,"icon",3,"tooltip"],["mat-header-row",""],["mat-row","",3,"ngClass","click"],["mat-row","",1,"expanded-row"],["mat-table","","matSort","",1,"table","jobs",3,"dataSource","matSortChange"],["matColumnDef","icon"],["mat-cell","","class","td_icons",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","quantity"],["matColumnDef","size"],["matColumnDef","price"],["mat-row","",3,"mouseup",4,"matRowDef","matRowDefColumns"],["mat-cell","",1,"td_icons"],["class","icon","src","./assets/images/icons/warning-red.svg","alt","Error",3,"tooltip",4,"ngIf"],["mat-row","",3,"mouseup"],[3,"length","pageSize","pageSizeOptions","pageIndex","page"],[3,"isSearch","noResultsText"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Orders"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"app-search",4),t.NdJ("searchEvent",function(c){return o.searchByText(c)}),t.qZA()(),t.YNc(6,K,2,2,"div",5),t.TgZ(7,"div",6)(8,"app-filter",7),t.NdJ("searchEvent",function(c){return o.searchByFilters(c)}),t.qZA()()(),t.TgZ(9,"app-filter-labels",8),t.NdJ("clearLabelsEvent",function(c){return o.searchByFilters(c)}),t.qZA(),t.YNc(10,W,5,4,"div",9),t.YNc(11,Wt,4,2,"ng-container",10),t.YNc(12,Xt,1,0,"ng-template",null,11,t.W1O),t.qZA()),2&e){const a=t.MAs(13);t.xp6(5),t.Q6J("placeholder","Type PO number, Job number or any other data..."),t.xp6(1),t.Q6J("ngIf",o.selectedTab),t.xp6(2),t.Q6J("setFilterConfig",o.filterConfig),t.xp6(1),t.Q6J("setFilterLabels",o.filterLabels),t.xp6(1),t.Q6J("ngIf",o.selection.selected.length),t.xp6(1),t.Q6J("ngIf",o.isDataLoaded)("ngIfElse",a)}},dependencies:[_.mk,_.sg,_.O5,C.yS,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,P.oG,M.YE,M.nU,Z.NW,B.i,j.S,q.g,R.z,$.j,L.N,H.P,z.n,G.R,_.H9],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.wrap[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;column-gap:20px;padding-bottom:24px}.wrap[_ngcontent-%COMP%]   .top__search[_ngcontent-%COMP%]{flex:1}.wrap[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{height:44px;width:95%;margin-bottom:-1px;border-color:transparent;color:#5a5c81;background:transparent;transition:.3s ease-in}.wrap[_ngcontent-%COMP%]   .input.disabled[_ngcontent-%COMP%]{pointer-events:none}.wrap[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus{border-bottom:1px solid #c5c5c5}.wrap[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]::placeholder{color:#5a5c81}",'[_ngcontent-%COMP%]:root{--header-height: 180px}.orders[_ngcontent-%COMP%]   .title-main[_ngcontent-%COMP%]{margin-bottom:32px}.orders[_ngcontent-%COMP%]   .top_tabs[_ngcontent-%COMP%]{width:260px}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:0}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:16px}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:16px}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{color:#1b459b;transition:.2s ease-out}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]:hover{text-decoration:underline}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:14vw}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:13vw}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15vw}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:9vw}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){min-width:130px}.orders[_ngcontent-%COMP%]   table.jobs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:87px}.orders[_ngcontent-%COMP%]   table.jobs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{min-width:61px}.orders[_ngcontent-%COMP%]   table.admin.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-child{width:111px;min-width:111px}.orders[_ngcontent-%COMP%]   table.admin.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:nth-child(6){width:auto}.orders[_ngcontent-%COMP%]   table.admin.mat-table[_ngcontent-%COMP%]   th.mat-header-cell.small[_ngcontent-%COMP%]{width:75px;min-width:75px}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]:not(.admin).jobs-table   th[_ngcontent-%COMP%]:nth-child(2){width:10.5vw}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-select[_ngcontent-%COMP%]{text-align:center}.orders[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .checkbox-wrap[_ngcontent-%COMP%]{margin-left:-24px}.orders[_ngcontent-%COMP%]   .expanded_details[_ngcontent-%COMP%]{overflow:hidden;display:flex}.orders[_ngcontent-%COMP%]   tr.expanded-row[_ngcontent-%COMP%]{height:0}.orders[_ngcontent-%COMP%]   tr.expanded-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding-right:24px}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;margin-left:12px;background:#FFF;border-radius:6px}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{max-width:16px;max-height:16px}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]{width:54px;height:54px;border-radius:6px;margin-right:40px}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:100%;height:100%}.orders[_ngcontent-%COMP%]   tr.open[_ngcontent-%COMP%] + .expanded-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding-bottom:8px}.orders[_ngcontent-%COMP%]   tr.open[_ngcontent-%COMP%] + .expanded-row[_ngcontent-%COMP%]   .expanded_details[_ngcontent-%COMP%]{padding-bottom:8px}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]:hover{background-color:#fff}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__header[_ngcontent-%COMP%]{background-color:#eef6ff}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px 0 5px;text-align:left;font-size:12px;font-weight:500;border-bottom:1px solid #8fb9f9;color:#111729}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]{transition:.3s ease-out}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]:hover{background-color:#f5faff}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:7px 0;color:#5a5c81;font-size:12px;border-bottom:1px solid #D7E9FC}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .table__row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .expanded_details[_ngcontent-%COMP%]{position:relative;border-radius:0 0 8px 8px;background-color:#f5f8fc}.orders[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) + .expanded-row[_ngcontent-%COMP%]   .expanded_details[_ngcontent-%COMP%]:after{content:"";display:block;height:1px;width:100%;background-color:#d7e9fc;position:absolute;left:0;bottom:-8px}.orders[_ngcontent-%COMP%]   .jobs[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:12px}.orders[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:flex;padding:0 20px;margin:0 0 0 auto}.orders[_ngcontent-%COMP%]   .arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}'],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})(),pathMatch:"full"},{path:"order/:orderId",component:v.n}];let te=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(Vt),C.Bz]}),n})();var ee=i(4466);let ne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,te,d.p0,P.p9,M.JX,Z.TU,ee.m]}),n})()}}]);