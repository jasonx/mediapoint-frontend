"use strict";(self.webpackChunkMediapoint=self.webpackChunkMediapoint||[]).push([[961],{2747:(S,g,e)=>{e.d(g,{e:()=>m});const m={LOGIN:"login",REGISTRATION:"registration",RESET_PASSWORD:"reset-password",FORGOT_PASSWORD:"forgot-password",VERIFY_EMAIL:"verify-email",CONFIRM_EMAIL_UPDATING:"confirm-email-updating"}},2810:(S,g,e)=>{e.d(g,{H:()=>m});const m={LOCK:{src:"../../../../assets/images/icons/lock.svg",alt:"Lock"},EMAIL:{src:"../../../../assets/images/icons/email.svg",alt:"Email"},WALLET:{src:"../../../../assets/images/icons/wallet.svg",alt:"Wallet"}}},9212:(S,g,e)=>{e.d(g,{c:()=>b});var m=e(8760),T=e(1571),n=e(5384);let b=(()=>{class d{constructor(i){this.apiService=i}personalInformation(i){return this.apiService.post(m.T5.PERSONAL_INFORMATION,i)}customerInformation(i){return this.apiService.post(m.T5.CUSTOMER_INFORMATION,i)}verifyEmail(i,l,p){return this.apiService.get((i?m.T5.VERIFY_EMAIL:m.T5.CONFIRM_EMAIL)+`?request_id=${l}&token=${p}`)}}return d.\u0275fac=function(i){return new(i||d)(T.LFG(n.s))},d.\u0275prov=T.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},1961:(S,g,e)=>{e.r(g),e.d(g,{AuthorizationModule:()=>G});var m=e(6895),T=e(655),n=e(4006),b=e(7795),d=e(9673),h=e(2722),i=e(262),l=e(2893),p=e(8112),v=e(9545),w=e(9777),P=e(422),c=e(2747),u=e(5412),A=e(2810),O=e(7188),t=e(1571),x=e(1438),y=e(9212),f=e(5453),R=e(42),Z=e(6885);function U(s,r){if(1&s&&t._UZ(0,"div",14),2&s){const o=t.oxw();t.Q6J("innerHTML",o.notification,t.oJD)}}const M="login";class L{constructor(r,o,a,C,E,I,F){this.authService=r,this.registrationService=o,this.router=a,this.activatedRoute=C,this.dialog=E,this.destroy$=I,this.formBuilder=F,this.AUTHORIZATION=c.e,this.notification=null,this.FIELD_TYPES=b.U,this.isLoadedBtn=!0,this.buttonSubmitConfig={text:"Login",type:p.L.Submit,viewType:d.F.TransparentWhite,padding:"0 50px",minWidth:"100%"},this.buttonSignUpConfig={text:"Sign up",viewType:d.F.Text,padding:"0 8px"},this.buttonRecoveryConfig={text:"Forgot password?",viewType:d.F.Link,color:"white",padding:"2px 0"},this.dialogConfig={icon:A.H.EMAIL,title:"Success!",informationButtonText:"Go to login"},this.formStorage=this.formBuilder.nonNullable.group({email:"",password:""})}ngOnInit(){this.initForm(),this.subscribeForm(),this.trackVerifyEmail()}trackVerifyEmail(){this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(r=>{const o=r.request_id,{token:a}=r;o&&a&&(this.isLoginPage=this.router.url.includes(c.e.LOGIN),this.registrationService.verifyEmail(this.isLoginPage,o,a).pipe((0,h.R)(this.destroy$),(0,i.K)(C=>{throw C})).subscribe(()=>this.openSuccessDialog()))})}openSuccessDialog(){let r=new u.vA;this.dialogConfig.message=this.isLoginPage?"Your email has been verified.":"Email was successfully confirmed.",r={...r,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogConfig},this.dialog.open(O.a,r)}initForm(){this.form=this.formBuilder.nonNullable.group({email:[(0,v.EP)(this.formStorage,"email"),[n.kI.required,n.kI.email]],password:[(0,v.EP)(this.formStorage,"password"),[n.kI.required]]})}subscribeForm(){this.form.valueChanges.pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.formStorage.patchValue(r),this.form.get("email")?.errors?.errorText?.includes("These credentials do not match our records.")&&this.form.controls.email.setErrors(null)})}submitForm(){this.form.invalid?this.form.markAllAsTouched():(this.isLoadedBtn=!1,this.authService.login(this.form.value).pipe((0,h.R)(this.destroy$),(0,i.K)(r=>{if(this.isLoadedBtn=!0,r.error.message===P.HE)this.notification=null,(0,w.d)(this.form,r);else switch(r.error.message){case P.is:this.notification="This email address has not yet been approved by Mediapoint Administrator. <br/> Please try again later";break;case P.w$:this.notification='The company you are associated with is no longer active in our system. Please email <a href = "mailto:trade@mediapoint.com.au">trade@mediapoint.com.au</a> to get your account active again.';break;default:this.notification=r.error.message}throw r})).subscribe(r=>{this.isLoadedBtn=!0,r.accessToken&&this.router.navigate([this.authService.fromPageUrl?this.authService.fromPageUrl:"/dashboard"]).then(()=>{(0,v.df)(M),this.authService.fromPageUrl&&(this.authService.fromPageUrl=null)})}))}onChangeDisplayPass(){this.isShowPassword=!this.isShowPassword}}L.\u0275fac=function(r){return new(r||L)(t.Y36(x.Z),t.Y36(y.c),t.Y36(f.F0),t.Y36(f.gz),t.Y36(u.uw),t.Y36(l.h),t.Y36(n.qu))},L.\u0275cmp=t.Xpm({type:L,selectors:[["app-login"]],features:[t._Bn([l.h])],decls:19,vars:18,consts:[[1,"login"],[1,"auth-title","title"],[1,"auth-descr","descr"],["autocomplete","on",1,"form",3,"formGroup","ngSubmit"],[1,"form_field"],["formControlName","email",3,"control","label","labelColor","type","placeholder"],["formControlName","password",3,"control","label","labelColor","type","placeholder"],["class","notification",3,"innerHTML",4,"ngIf"],[1,"submit"],[3,"buttonConfig","isLoaded"],[1,"buttons"],[1,"question"],[3,"buttonConfig","routerLink"],[1,"recovery"],[1,"notification",3,"innerHTML"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Login"),t.qZA(),t.TgZ(3,"div",2),t._uU(4," Join over 1239 PrintPreneurs in Australia who use our exclusive Trade Printing "),t.qZA(),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(6,"div",4),t._UZ(7,"app-field",5),t.qZA(),t.TgZ(8,"div",4),t._UZ(9,"app-field",6),t.qZA(),t.YNc(10,U,1,1,"div",7),t.TgZ(11,"div",8),t._UZ(12,"app-button",9),t.qZA()(),t.TgZ(13,"div",10)(14,"div",11),t._uU(15," Don't have an account? "),t._UZ(16,"app-button",12),t.qZA(),t.TgZ(17,"div",13),t._UZ(18,"app-button",12),t.qZA()()()),2&r&&(t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("control",o.form.controls.email)("label","Email")("labelColor","white")("type",o.FIELD_TYPES.Email)("placeholder","Email"),t.xp6(2),t.Q6J("control",o.form.controls.password)("label","Password")("labelColor","white")("type",o.FIELD_TYPES.Password)("placeholder","Password"),t.xp6(1),t.Q6J("ngIf",o.notification),t.xp6(2),t.Q6J("buttonConfig",o.buttonSubmitConfig)("isLoaded",o.isLoadedBtn),t.xp6(4),t.Q6J("buttonConfig",o.buttonSignUpConfig)("routerLink","/authorization/"+o.AUTHORIZATION.REGISTRATION),t.xp6(2),t.Q6J("buttonConfig",o.buttonRecoveryConfig)("routerLink","/authorization/"+o.AUTHORIZATION.FORGOT_PASSWORD))},dependencies:[m.O5,f.rH,n._Y,n.JJ,n.JL,n.sg,n.u,R.r,Z.C],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.login[_ngcontent-%COMP%]{margin:59px 0 120px}.login[_ngcontent-%COMP%]   .descr[_ngcontent-%COMP%]{max-width:319px}.login[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:24px}.login[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{margin-bottom:24px}"]}),(0,T.gn)([(0,v.Po)(M)],L.prototype,"formStorage",void 0);var B=e(8884);let D=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-authorization-base"]],features:[t._Bn([l.h])],decls:34,vars:1,consts:[[1,"authorization"],[1,"authorization__main"],[1,"authorization__image"],["id","secondBlock"],[3,"isToDown"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA(),t._UZ(3,"div",2),t.qZA(),t._UZ(4,"div",3)(5,"br")(6,"br")(7,"br")(8,"br")(9,"br")(10,"br")(11,"br")(12,"br")(13,"br")(14,"br")(15,"br")(16,"br"),t._uU(17,"\nTo test the scroll button\n"),t._UZ(18,"br")(19,"br")(20,"br")(21,"br")(22,"br")(23,"br")(24,"br")(25,"br")(26,"br")(27,"br")(28,"br")(29,"br")(30,"br")(31,"br")(32,"app-scroll-btn",4)(33,"app-scroll-btn")),2&o&&(t.xp6(32),t.Q6J("isToDown",!0))},dependencies:[f.lC,B.N],styles:[":root{--header-height: 180px}.authorization{display:flex;min-height:calc(100vh - var(--header-height))}.authorization__main{display:flex;justify-content:center;width:58%;background-color:#1b459b}.authorization__image{width:42%;background:#1B459B url(registration.9d652c09389dc924.jpg) 0 15% / cover no-repeat}.authorization .form{width:50vw;max-width:600px}.authorization .form_field{width:100%;margin-bottom:24px}.authorization .form_group{display:flex;column-gap:16px}.authorization .question{display:flex;align-items:center;color:#fff}.authorization .notification{margin:0 auto;padding:8px 24px;font-size:12px;line-height:15.6px;text-align:center;color:#ff5858;background-color:#ffefef;border-radius:6px}.authorization .notification a{color:#ff5858;text-decoration:underline}.authorization .notification a:hover{text-decoration:none}.auth-title{margin:0 auto 12px;font-size:36px;line-height:54px;font-weight:600;color:#fff;text-align:center}.auth-descr{margin:0 auto 32px;text-align:center;font-size:16px;line-height:22.4px;color:#fff}\n"],encapsulation:2}),s})();var N=e(4466),z=e(2843);const _=[{path:"",component:D,children:[{path:"",redirectTo:c.e.LOGIN,pathMatch:"full"},{path:c.e.LOGIN,component:L},{path:c.e.CONFIRM_EMAIL_UPDATING,component:L},{path:c.e.REGISTRATION,loadChildren:()=>e.e(751).then(e.bind(e,751)).then(s=>s.RegistrationModule)},{path:c.e.FORGOT_PASSWORD,component:(()=>{class s{constructor(o,a,C,E,I){this.authService=o,this.destroy$=a,this.dialog=C,this.formBuilder=E,this.router=I,this.AUTHORIZATION=c.e,this.FIELD_TYPES=b.U,this.isLoadedBtn=!0,this.buttonResetConfig={text:"Reset password",type:p.L.Submit,viewType:d.F.TransparentWhite,padding:"0 50px",minWidth:"100%"},this.buttonQuestionConfig={text:"I remember my password",viewType:d.F.Text,color:"white",padding:"2px 0"},this.dialogConfig={icon:A.H.LOCK,title:"Email has been sent",message:"We have sent you reset password link to your email: ",informationButtonText:"Back to log in"}}ngOnInit(){this.initForm()}initForm(){this.form=this.formBuilder.nonNullable.group({email:["",[n.kI.required,n.kI.email]]})}submitForm(){this.form.invalid?this.form.markAllAsTouched():(this.isLoadedBtn=!1,this.authService.forgotPassword(this.form.value).pipe((0,h.R)(this.destroy$),(0,i.K)(o=>(this.isLoadedBtn=!0,this.form.controls.email.setErrors({errorText:o.error.message}),(0,z._)(()=>new Error(o))))).subscribe(()=>{this.isLoadedBtn=!0,this.openDialog()}))}openDialog(){let o=new u.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:{...this.dialogConfig,message:this.dialogConfig.message+this.form.get("email")?.value}},this.dialog.open(O.a,o).afterClosed().pipe((0,h.R)(this.destroy$)).subscribe(()=>this.router.navigate(["./authorization/login"]).then())}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(x.Z),t.Y36(l.h),t.Y36(u.uw),t.Y36(n.qu),t.Y36(f.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot-password"]],decls:12,vars:10,consts:[[1,"forgot-password"],[1,"auth-title","title"],[1,"auth-descr","descr"],["autocomplete","on",1,"form",3,"formGroup","ngSubmit"],[1,"form_field"],["formControlName","email",3,"control","label","labelColor","type","placeholder"],[1,"submit"],[3,"buttonConfig","isLoaded"],[1,"question"],[3,"buttonConfig","routerLink"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Forgot your password?"),t.qZA(),t.TgZ(3,"div",2),t._uU(4," Enter your email address below and we will send you reset link "),t.qZA(),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return a.submitForm()}),t.TgZ(6,"div",4),t._UZ(7,"app-field",5),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"app-button",7),t.qZA()(),t.TgZ(10,"div",8),t._UZ(11,"app-button",9),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("control",a.form.controls.email)("label","Email")("labelColor","white")("type",a.FIELD_TYPES.Email)("placeholder","Email"),t.xp6(2),t.Q6J("buttonConfig",a.buttonResetConfig)("isLoaded",a.isLoadedBtn),t.xp6(2),t.Q6J("buttonConfig",a.buttonQuestionConfig)("routerLink","/authorization/"+a.AUTHORIZATION.LOGIN))},dependencies:[f.rH,n._Y,n.JJ,n.JL,n.sg,n.u,R.r,Z.C],styles:[":root{--header-height: 180px}.forgot-password{margin:117px 0 120px}.forgot-password .descr{max-width:285px}.forgot-password .submit{margin-top:40px}.forgot-password .question{justify-content:center;margin-top:16px}\n"],encapsulation:2}),s})()},{path:c.e.RESET_PASSWORD,component:(()=>{class s{constructor(o,a,C,E,I,F){this.authService=o,this.destroy$=a,this.route=C,this.dialog=E,this.formBuilder=I,this.router=F,this.FIELD_TYPES=b.U,this.isLoadedBtn=!0,this.buttonSubmitConfig={text:"Reset password",type:p.L.Submit,viewType:d.F.TransparentWhite,padding:"0 50px",minWidth:"100%"},this.dialogConfig={icon:A.H.LOCK,title:"Your password has been reset!",informationButtonText:"Go to login"}}ngOnInit(){this.initForm()}submitForm(){this.form.invalid?this.form.markAllAsTouched():this.form.controls.password.value===this.form.controls.passwordConfirmation.value?(this.isLoadedBtn=!1,this.authService.resetPassword(this.form.value).pipe((0,h.R)(this.destroy$),(0,i.K)(o=>{throw this.isLoadedBtn=!0,o.error.errors&&(0,w.d)(this.form,o),o})).subscribe(()=>{this.isLoadedBtn=!0,this.openDialog()})):this.form.controls.passwordConfirmation.setErrors({errorText:"The password confirmation does not match"})}openDialog(){let o=new u.vA;o={...o,disableClose:!0,width:"100%",maxWidth:"558px",data:this.dialogConfig},this.dialog.open(O.a,o).afterClosed().pipe((0,h.R)(this.destroy$)).subscribe(()=>this.router.navigate(["./authorization/login"]).then())}initForm(){this.form=this.formBuilder.nonNullable.group({email:this.route.snapshot.queryParams.email,token:this.route.snapshot.queryParams.token,password:["",[n.kI.required]],passwordConfirmation:["",[n.kI.required]]})}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(x.Z),t.Y36(l.h),t.Y36(f.gz),t.Y36(u.uw),t.Y36(n.qu),t.Y36(f.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-reset-password"]],decls:12,vars:13,consts:[[1,"reset-password"],[1,"auth-title","title"],[1,"auth-descr","descr"],["autocomplete","off",1,"form",3,"formGroup","ngSubmit"],[1,"form_field"],["formControlName","password",3,"control","label","labelColor","type","placeholder"],["formControlName","passwordConfirmation",3,"control","label","labelColor","type","placeholder"],[1,"submit"],[3,"buttonConfig","isLoaded"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Reset password"),t.qZA(),t.TgZ(3,"div",2),t._uU(4,"Enter your new password below"),t.qZA(),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return a.submitForm()}),t.TgZ(6,"div",4),t._UZ(7,"app-field",5),t.qZA(),t.TgZ(8,"div",4),t._UZ(9,"app-field",6),t.qZA(),t.TgZ(10,"div",7),t._UZ(11,"app-button",8),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("control",a.form.controls.password)("label","Password")("labelColor","white")("type",a.FIELD_TYPES.Password)("placeholder","Password"),t.xp6(2),t.Q6J("control",a.form.controls.passwordConfirmation)("label","Confirm password")("labelColor","white")("type",a.FIELD_TYPES.Password)("placeholder","Confirm password"),t.xp6(2),t.Q6J("buttonConfig",a.buttonSubmitConfig)("isLoaded",a.isLoadedBtn))},dependencies:[n._Y,n.JJ,n.JL,n.sg,n.u,R.r,Z.C],styles:["[_ngcontent-%COMP%]:root{--header-height: 180px}.reset-password[_ngcontent-%COMP%]{margin:117px 0 120px}.reset-password[_ngcontent-%COMP%]   .descr[_ngcontent-%COMP%]{max-width:285px}.reset-password[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{margin-top:40px}"]}),s})()}]}];let G=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[m.ez,f.Bz.forChild(_),n.UX,N.m]}),s})()},9545:(S,g,e)=>{e.d(g,{EP:()=>h,Po:()=>n,df:()=>d});var m=e(9751),T=e(8372);function n(i,l=localStorage,p=JSON.parse,v=JSON.stringify){return(w,P)=>{let u;const A=w.ngOnDestroy;w.ngOnDestroy=function(){u?.unsubscribe(),A?.apply(this)};let O=w[P];Object.defineProperty(w,P,{get:()=>O,set:y=>{u?.unsubscribe(),O=y,y&&("string"==typeof i?u=b(l,i,y,p,v,u):i instanceof m.y?i.subscribe({next:f=>u=b(l,f,y,p,v,u)}):i.then(f=>u=b(l,f,y,p,v,u)))}})}}function b(i,l,p,v,w,P){P?.unsubscribe();const c=i.getItem(l);return c&&p.patchValue(v(c)),p.valueChanges.pipe((0,T.b)(100)).subscribe({next:u=>i.setItem(l,w(u))})}function d(i,l=localStorage){"string"==typeof i?l.removeItem(i):i instanceof m.y?i.subscribe({next:p=>l.removeItem(p)}):i.then(p=>l.removeItem(p))}function h(i,l){return i.get(l)?.value?i.get(l)?.value:""}},9777:(S,g,e)=>{e.d(g,{d:()=>T});var m=e(5212);const T=(n,b)=>{const{errors:d}=b.error;for(const h in d)if(h in d){const i=n.get((0,m.fZ)(h));i&&(i.setErrors({errorText:d[h]}),i.markAsTouched())}}}}]);